import{S as he,i as pe,s as _e,d as v,f as N,g as m,t as M,h as R,j as D,k as p,l as H,n as x,m as P,r as Ne,o as Lt,v as me,C as we,w as be,x as te,y as yt,z as fe,A as J,B as Xe,D as j,E as S,F as de,G as C,H as ge,I as ue,J as Qe,K as Y,L as St,M as Ze,N as Ge,O as zt,P as Ae,Q as xe,R as Ce,T as qt,U as Le,V as Je,W as ce,X as Ue,Y as Re,Z as Me,_ as $e,$ as Et,a0 as Vt,a1 as Nt,a2 as Ut,a3 as Rt,a4 as Bt,a5 as Ft,a6 as Ot,a7 as et,a8 as vt,a9 as Dt,aa as Pt,ab as Qt,ac as Jt,ad as qe,ae as jt}from"./chunk-2afa392f.js";import{S as ze,b as ve,R as Ie,c as ae,d as Ee,C as Ct,M as Yt,e as tt,f as Ht,g as Kt,i as We,E as Xt,s as It,j as Zt,k as Gt}from"./chunk-3e60e2ce.js";import"./chunk-28e086c5.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function xt(l){let e,n,t,r,s,o,i,f,a,u,_,c,I,h,E,g,d,z,b,L,F,K,Z;return{c(){e=v("div"),n=v("div"),t=v("div"),r=N(),s=v("div"),o=N(),i=v("div"),f=N(),a=v("div"),u=v("div"),_=N(),c=v("div"),I=N(),h=v("div"),E=N(),g=v("div"),d=v("div"),z=N(),b=v("div"),L=N(),F=v("div"),m(t,"class","resizer h-[6px] w-[6px] rounded-sm border-2 svelte-19ac299"),M(t,"cursor-nw-resize",!l[4]),M(t,"dragging",l[4]&&l[5]===l[15]),m(s,"class","resizer h-[6px] border-b-2 border-dashed svelte-19ac299"),R(s,"width",l[2]+"px"),M(s,"cursor-n-resize",!l[4]),M(s,"dragging",l[4]&&l[5]===l[13]),m(i,"class","resizer h-[6px] w-[6px] rounded-sm border-2 svelte-19ac299"),M(i,"cursor-ne-resize",!l[4]),M(i,"dragging",l[4]&&l[5]===l[16]),m(n,"class","flex flex-row"),m(u,"class","resizer w-[6px] border-r-2 border-dashed svelte-19ac299"),R(u,"height",l[3]+"px"),M(u,"cursor-w-resize",!l[4]),M(u,"dragging",l[4]&&l[5]===l[12]),m(c,"class","cursor-move"),R(c,"width",l[2]+"px"),R(c,"height",l[3]+"px"),m(h,"class","resizer w-[6px] border-l-2 border-dashed svelte-19ac299"),R(h,"height",l[3]+"px"),M(h,"cursor-e-resize",!l[4]),M(h,"dragging",l[4]&&l[5]===l[10]),m(a,"class","flex flex-row"),m(d,"class","resizer h-[6px] w-[6px] rounded-sm border-2 svelte-19ac299"),M(d,"cursor-sw-resize",!l[4]),M(d,"dragging",l[4]&&l[5]===l[17]),m(b,"class","resizer h-[6px] border-t-2 border-dashed svelte-19ac299"),R(b,"width",l[2]+"px"),M(b,"cursor-s-resize",!l[4]),M(b,"dragging",l[4]&&l[5]===l[11]),m(F,"class","resizer h-[6px] w-[6px] rounded-sm border-2 svelte-19ac299"),M(F,"cursor-se-resize",!l[4]),M(F,"dragging",l[4]&&l[5]===l[14]),m(g,"class","flex flex-row"),m(e,"class","this svelte-19ac299"),R(e,"left",l[0]-6+"px"),R(e,"top",l[1]-6+"px"),R(e,"width",l[2]+12+"px"),R(e,"height",l[3]+12+"px"),M(e,"dragging",!!l[4])},m(w,q){D(w,e,q),p(e,n),p(n,t),p(n,r),p(n,s),p(n,o),p(n,i),p(e,f),p(e,a),p(a,u),p(a,_),p(a,c),p(a,I),p(a,h),p(e,E),p(e,g),p(g,d),p(g,z),p(g,b),p(g,L),p(g,F),K||(Z=[H(window,"mouseup",l[19]),H(window,"mousemove",l[8]),H(t,"mousedown",l[20]),H(s,"mousedown",l[21]),H(i,"mousedown",l[22]),H(u,"mousedown",l[23]),H(c,"mousedown",l[24]),H(h,"mousedown",l[25]),H(d,"mousedown",l[26]),H(b,"mousedown",l[27]),H(F,"mousedown",l[28])],K=!0)},p(w,[q]){q&16&&M(t,"cursor-nw-resize",!w[4]),q&32816&&M(t,"dragging",w[4]&&w[5]===w[15]),q&4&&R(s,"width",w[2]+"px"),q&16&&M(s,"cursor-n-resize",!w[4]),q&8240&&M(s,"dragging",w[4]&&w[5]===w[13]),q&16&&M(i,"cursor-ne-resize",!w[4]),q&65584&&M(i,"dragging",w[4]&&w[5]===w[16]),q&8&&R(u,"height",w[3]+"px"),q&16&&M(u,"cursor-w-resize",!w[4]),q&4144&&M(u,"dragging",w[4]&&w[5]===w[12]),q&4&&R(c,"width",w[2]+"px"),q&8&&R(c,"height",w[3]+"px"),q&8&&R(h,"height",w[3]+"px"),q&16&&M(h,"cursor-e-resize",!w[4]),q&1072&&M(h,"dragging",w[4]&&w[5]===w[10]),q&16&&M(d,"cursor-sw-resize",!w[4]),q&131120&&M(d,"dragging",w[4]&&w[5]===w[17]),q&4&&R(b,"width",w[2]+"px"),q&16&&M(b,"cursor-s-resize",!w[4]),q&2096&&M(b,"dragging",w[4]&&w[5]===w[11]),q&16&&M(F,"cursor-se-resize",!w[4]),q&16432&&M(F,"dragging",w[4]&&w[5]===w[14]),q&1&&R(e,"left",w[0]-6+"px"),q&2&&R(e,"top",w[1]-6+"px"),q&4&&R(e,"width",w[2]+12+"px"),q&8&&R(e,"height",w[3]+12+"px"),q&16&&M(e,"dragging",!!w[4])},i:x,o:x,d(w){w&&P(e),K=!1,Ne(Z)}}}function $t(l,e,n){let{x:t}=e,{y:r}=e,{width:s}=e,{height:o}=e,{ratio:i=s/o}=e,f,a=()=>{},u="",_=Lt();function c(k,A,U){k.preventDefault(),n(4,f=k.target),n(5,a=A),n(6,u=U),document.body.classList.add(U)}function I(k){f&&(a({x:k.clientX,y:k.clientY}),_("update",{pos:{x:t,y:r},rect:{width:s,height:o}}))}function h(k){k.preventDefault(),n(4,f=k.target);let A=k.offsetX,U=k.offsetY;n(5,a=O=>{let G=f.getBoundingClientRect(),ie=O.x-(G.x+A),ne=O.y-(G.y+U);n(0,t+=ie),n(1,r+=ne)})}function E(k,A=!1){let U=f.getBoundingClientRect(),O=k.x-(U.x+1+U.width/2),G=Math.max(s+(A?-O:O),0),ie=Math.max(G/i,0),ne=(ie-o)/2;n(2,s=G),n(3,o=ie),n(1,r-=ne)}function g(k,A=!1){let U=f.getBoundingClientRect(),O=k.y-(U.y+U.height/2),G=Math.max(o+(A?-O:O),0),ie=Math.max(G*i,0),ne=(ie-s)/2;n(2,s=ie),n(3,o=G),n(0,t-=ne)}function d(k){let A=s;E(k,!0),n(0,t-=s-A)}function z(k){let A=o;g(k,!0),n(1,r-=o-A)}function b(k,A={}){let U=f.getBoundingClientRect(),O=(k.x-(U.x+U.width/2))*(A.x?-1:1),G=(k.y-(U.y+U.height/2))*(A.y?-1:1),ie=Math.abs(O)<Math.abs(G)?O:G,ne=Math.min(Math.abs(O)/Math.max(s,1),Math.abs(G)/Math.max(o,1)),oe=Math.max(s+Math.max(s,1)*ne*(ie<0?-1:1),0);n(3,o=Math.max(oe/i,0)),n(2,s=oe)}function L(k){let A={width:s,height:o};b(k,{x:!0,y:!0}),n(0,t-=s-A.width),n(1,r-=o-A.height)}function F(k){let A=o;b(k,{y:!0}),n(1,r-=o-A)}function K(k){let A=s;b(k,{x:!0}),n(0,t-=s-A)}const Z=()=>{n(4,f=void 0),u.length&&document.body.classList.remove(u)},w=k=>c(k,L,"cursor-nw-resize"),q=k=>c(k,z,"cursor-n-resize"),T=k=>c(k,F,"cursor-ne-resize"),y=k=>c(k,d,"cursor-w-resize"),W=k=>h(k),B=k=>c(k,E,"cursor-e-resize"),ee=k=>c(k,K,"cursor-sw-resize"),se=k=>c(k,g,"cursor-s-resize"),le=k=>c(k,b,"cursor-se-resize");return l.$$set=k=>{"x"in k&&n(0,t=k.x),"y"in k&&n(1,r=k.y),"width"in k&&n(2,s=k.width),"height"in k&&n(3,o=k.height),"ratio"in k&&n(18,i=k.ratio)},[t,r,s,o,f,a,u,c,I,h,E,g,d,z,b,L,F,K,i,Z,w,q,T,y,W,B,ee,se,le]}class el extends he{constructor(e){super(),pe(this,e,$t,xt,_e,{x:0,y:1,width:2,height:3,ratio:18})}}const Oe="/assets/png-847a4edb.png",De="/assets/png-86f6b9a0.png",je="data:image/png;base64,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",Wt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAAAbCAYAAABydtG3AAABbmlDQ1BpY2MAACiRdZFLSwJhFIYftShKcVFQRAsXFhEKURAtwyA31kINstqM4y3wMswoIW2DNi2EFlGbbov+QW2DtgVBUAQR7dp324RMZ1RQQs/wzXl4v/MezpwBeyir5oyuecjli3o4GPCsxtY8Pe/YGcLGJC5FNbSlyGKUjvHzKJUSD36rV+e6ttGfSBoq2HqFZ1VNLwrLNIS2iprFe8KDakZJCJ8I+3QZUPjW0uN1frM4Xecvi/VoeAHsVk9PuoXjLaxm9JzwhLA3ly2pjXmsL3Em8ysRySNyRjEIEySAhzglNslSxC85Lztr75uq+ZYpiEeVt0YZXRxpMuL1iVqSrknJKdGT8mQpW3v/v08jNTNd7+4MQPeraX6OQc8+VCum+XtqmtUzcLzAdb7pL8ie5r5FrzQ17zG4d+DypqnFD+BqF4afNUVXapJDjj2Vgo8LcMVg4B761uu7atxz/gTRbflFd3B4BONS7974A/7qaAncN4wDAAAACXBIWXMAAC4jAAAuIwF4pT92AAABLklEQVRo3u2ZoQ7CMBRF2ymCYw5w4LDwCfALSD4BjcQi4TewOCx2cjgmsZObK7fQErJsQEiAveSe5NFsI4h70u6VamNMWyk1VkQcGvL2lCeTAJUyBrnyCOURyiOUR3mE8sj35GWMQa68nDHIlZcwBrnyIsYgkkzbTwOYhTgSdptyib08dpzy2Pllk8dCwtAWJ6+H4cRIxJBCXRg4iwmXTlEsr978FWbfHMOauchYMv0+z9/YKJ6qS2B2d1Z8wj1frYkwyUb+omyfN2JG9dyUP4orlYcvRG5NZQNTH7ZQ0i/eDJ68FJsYVsztr5xRIVxMyx4GL7qahZuFE9SBWf5mD+e6fht9F1XZROpPfh09zVDd/pEZoDqoFqrB3N8md68lK+aIiu3SqApnq25HUMkF9iA+fiYIrQ4AAAAASUVORK5CYII=";function tl(l){let e,n,t,r,s,o,i;return{c(){e=v("label"),n=v("div"),t=me(l[2]),r=N(),s=v("span"),o=N(),i=v("input"),m(n,"class","w-0 flex-grow"),m(s,"class","inline-block h-6 w-6 rounded-full border-2 shadow "),R(s,"background-color",l[1]),M(s,"border-white",we(l[1]).isDark()),M(s,"border-black",we(l[1]).isLight()),m(i,"type","hidden"),m(e,"class","flex cursor-pointer flex-row items-center gap-2 py-2 px-4 hover:bg-gray-300"),M(e,"bg-gray-300",l[3])},m(f,a){D(f,e,a),p(e,n),p(n,t),p(e,r),p(e,s),p(e,o),p(e,i),l[4](e)},p(f,[a]){a&4&&be(t,f[2]),a&2&&R(s,"background-color",f[1]),a&2&&M(s,"border-white",we(f[1]).isDark()),a&2&&M(s,"border-black",we(f[1]).isLight()),a&8&&M(e,"bg-gray-300",f[3])},i:x,o:x,d(f){f&&P(e),l[4](null)}}}function ll(l,e,n){let{hex:t}=e,{label:r}=e,{isOpen:s}=e,{labelWrapper:o}=e;function i(f){te[f?"unshift":"push"](()=>{o=f,n(0,o)})}return l.$$set=f=>{"hex"in f&&n(1,t=f.hex),"label"in f&&n(2,r=f.label),"isOpen"in f&&n(3,s=f.isOpen),"labelWrapper"in f&&n(0,o=f.labelWrapper)},[o,t,r,s,i]}class nl extends he{constructor(e){super(),pe(this,e,ll,tl,_e,{hex:1,label:2,isOpen:3,labelWrapper:0})}}const rl={title:"VTuber Preference List",slots:["The 1st You Watch","Watch the Most","Best Program","Craziest","Most Healing","Best Voice","Best Singing","Daisuki❤","Most influencial (to you)","Prettiest","You Would Commit A Crime","Most Kakkoi","Want To Promote the Most","Most Waifu Material","Customize"],label:{export:"Export",bgColor:"Background Color",addImage:"Add Image",credit:"Credit: ",code:"Source Code: ",language:"Language: ",translate:"Translate: "}},sl=Object.freeze(Object.defineProperty({__proto__:null,default:rl},Symbol.toStringTag,{value:"Module"})),ol={title:"VTuber 個人喜好表生成器",slots:["第一個看的","最常看的","最佳節目","最瘋狂的","最療愈的","聲音最好聽的","唱歌最好聽的","最喜歡的","影響最深遠的","最漂亮的","最想犯罪的","最帥的","最想推廣的","最婆的","自定义"],label:{export:"導出",bgColor:"背景顏色",addImage:"添加圖片",credit:"Credit: ",code:"代碼：",language:"語言：",translate:"翻譯："}},il=Object.freeze(Object.defineProperty({__proto__:null,default:ol},Symbol.toStringTag,{value:"Module"})),al=Object.assign({"../locales/en.yaml":sl,"../locales/zh-TW.yaml":il}),lt="zh-TW",Te="_lang",Pe={"zh-TW":!0,en:!0},Ve=new Set;function fl(l){var s;let e=al[`../locales/${ke.lang}.yaml`],n=l.split("."),t=n.shift(),r=(s=e==null?void 0:e.default)==null?void 0:s[t];for(;n.length;){let o=n.shift();r=r==null?void 0:r[o]}return r!==void 0?`${r}`:`!!{${l}}!!`}function ul(l,e){return l(ke),Ve.add(l),()=>Ve.delete(l)}const ke=Object.defineProperties(fl,{lang:{get(){let l=localStorage.getItem(Te)??lt;return Pe[l]?l:lt},set(l){if(Pe[l]&&l!==localStorage.getItem(Te)){localStorage.setItem(Te,l);for(let e of Ve)e(ke)}}}});ke.subscribe=ul;window.addEventListener("storage",l=>{if(l.key===Te&&Pe[l.newValue])for(let e of Ve)e(ke)});function cl(l){let e,n,t,r,s;return{c(){e=v("label"),n=v("span"),t=N(),r=v("input"),m(n,"class","inline-block h-4 w-4 rounded-full border shadow "),R(n,"background-color",l[1]),M(n,"border-white",we(l[1]).isDark()),M(n,"border-black",we(l[1]).isLight()),m(r,"type","hidden"),r.value=s=""+(l[3]+l[2]),m(e,"class","flex cursor-pointer flex-row items-center")},m(o,i){D(o,e,i),p(e,n),p(e,t),p(e,r),l[4](e)},p(o,[i]){i&2&&R(n,"background-color",o[1]),i&2&&M(n,"border-white",we(o[1]).isDark()),i&2&&M(n,"border-black",we(o[1]).isLight()),i&12&&s!==(s=""+(o[3]+o[2]))&&(r.value=s)},i:x,o:x,d(o){o&&P(e),l[4](null)}}}function dl(l,e,n){let{hex:t}=e,{label:r}=e,{isOpen:s}=e,{labelWrapper:o}=e;function i(f){te[f?"unshift":"push"](()=>{o=f,n(0,o)})}return l.$$set=f=>{"hex"in f&&n(1,t=f.hex),"label"in f&&n(2,r=f.label),"isOpen"in f&&n(3,s=f.isOpen),"labelWrapper"in f&&n(0,o=f.labelWrapper)},[o,t,r,s,i]}class gl extends he{constructor(e){super(),pe(this,e,dl,cl,_e,{hex:1,label:2,isOpen:3,labelWrapper:0})}}function nt(l,e,n){const t=l.slice();return t[24]=e[n],t[26]=n,t}function rt(l){let e,n,t;function r(o){l[11](o)}let s={isAlpha:!1,label:"",components:{input:gl}};return l[0].color!==void 0&&(s.hex=l[0].color),e=new yt({props:s}),te.push(()=>fe(e,"hex",r)),{c(){J(e.$$.fragment)},m(o,i){j(e,o,i),t=!0},p(o,i){const f={};!n&&i&1&&(n=!0,f.hex=o[0].color,ue(()=>n=!1)),e.$set(f)},i(o){t||(S(e.$$.fragment,o),t=!0)},o(o){C(e.$$.fragment,o),t=!1},d(o){Y(e,o)}}}function st(l,e){let n,t,r,s,o,i,f,a=e[24].name+"",u,_,c,I,h;function E(...b){return e[17](e[26],...b)}function g(){return e[20](e[24],e[26])}function d(){return e[21](e[26])}function z(...b){return e[22](e[26],...b)}return{key:l,first:null,c(){n=v("div"),t=v("div"),r=v("img"),i=N(),f=v("div"),u=me(a),_=N(),c=v("button"),c.textContent="Ｘ",m(r,"draggable","false"),m(r,"alt",s=e[24].name),Ze(r.src,o=e[24].image.src)||m(r,"src",o),m(r,"class","h-10 w-10 object-cover"),m(f,"class","w-0 flex-grow overflow-hidden whitespace-nowrap"),m(t,"class","flex w-0 flex-grow items-center gap-2 overflow-hidden"),m(t,"draggable","true"),m(c,"class","h-10 w-10 bg-slate-500 font-bold text-white"),m(n,"class","flex select-none flex-row items-center gap-4"),M(n,"bg-slate-300",e[1]===e[26]),this.first=n},m(b,L){D(b,n,L),p(n,t),p(t,r),p(t,i),p(t,f),p(f,u),p(n,_),p(n,c),I||(h=[H(t,"dragstart",E),H(t,"dragend",e[18]),H(c,"mousedown",Ge(e[19])),H(c,"click",Ge(g)),H(n,"mousedown",d),H(n,"dragover",z)],I=!0)},p(b,L){e=b,L&1&&s!==(s=e[24].name)&&m(r,"alt",s),L&1&&!Ze(r.src,o=e[24].image.src)&&m(r,"src",o),L&1&&a!==(a=e[24].name+"")&&be(u,a),L&3&&M(n,"bg-slate-300",e[1]===e[26])},d(b){b&&P(n),I=!1,Ne(h)}}}function hl(l){var k;let e,n,t,r,s,o,i,f,a,u,_,c,I,h,E,g,d,z,b=[],L=new Map,F,K,Z=l[6]("label.addImage")+"",w,q,T,y,W=((k=l[0].name)==null?void 0:k.length)&&rt(l);function B(A){l[14](A)}let ee={isAlpha:!1,label:l[6]("label.bgColor"),components:{input:nl}};l[0].background!==void 0&&(ee.hex=l[0].background),c=new yt({props:ee}),te.push(()=>fe(c,"hex",B));let se=l[0].layers;const le=A=>A[24].image;for(let A=0;A<se.length;A+=1){let U=nt(l,se,A),O=le(U);L.set(O,b[A]=st(O,U))}return{c(){e=v("div"),n=v("div"),t=v("button"),t.textContent="＜",r=N(),W&&W.c(),s=N(),o=v("input"),f=N(),a=v("button"),a.textContent="＞",u=N(),_=v("div"),J(c.$$.fragment),h=N(),E=v("div"),g=v("form"),d=v("input"),z=N();for(let A=0;A<b.length;A+=1)b[A].c();F=N(),K=v("button"),w=me(Z),m(t,"class","p-2"),m(o,"class","w-0 flex-grow bg-transparent py-2 px-1 font-normal text-slate-100 underline-offset-4 placeholder:text-slate-300 focus:outline-none"),m(o,"placeholder",i=l[6](`slots.${l[2]}`)),m(a,"class","p-2"),m(n,"class","flex flex-row items-center bg-slate-600 text-xl font-bold text-white"),m(d,"type","file"),m(d,"accept",".jpg,.jpeg,.png,.bmp,.webp"),m(g,"class","hidden"),m(K,"class","block p-0.5 hover:bg-gray-300 active:bg-gray-200"),m(E,"class","flex h-0 flex-grow flex-col gap-2 p-4"),m(e,"class","flex h-full w-full flex-col bg-gray-100")},m(A,U){D(A,e,U),p(e,n),p(n,t),p(n,r),W&&W.m(n,null),p(n,s),p(n,o),Xe(o,l[0].name),p(n,f),p(n,a),p(e,u),p(e,_),j(c,_,null),p(e,h),p(e,E),p(E,g),p(g,d),l[15](d),l[16](g),p(E,z);for(let O=0;O<b.length;O+=1)b[O].m(E,null);p(E,F),p(E,K),p(K,w),q=!0,T||(y=[H(t,"click",l[10]),H(o,"input",l[12]),H(a,"click",l[13]),H(d,"change",l[7]),H(K,"click",l[23])],T=!0)},p(A,[U]){var G;(G=A[0].name)!=null&&G.length?W?(W.p(A,U),U&1&&S(W,1)):(W=rt(A),W.c(),S(W,1),W.m(n,s)):W&&(de(),C(W,1,1,()=>{W=null}),ge()),(!q||U&68&&i!==(i=A[6](`slots.${A[2]}`)))&&m(o,"placeholder",i),U&1&&o.value!==A[0].name&&Xe(o,A[0].name);const O={};U&64&&(O.label=A[6]("label.bgColor")),!I&&U&1&&(I=!0,O.hex=A[0].background,ue(()=>I=!1)),c.$set(O),U&803&&(se=A[0].layers,b=Qe(b,U,le,1,A,se,L,E,zt,st,F,nt)),(!q||U&64)&&Z!==(Z=A[6]("label.addImage")+"")&&be(w,Z)},i(A){q||(S(W),S(c.$$.fragment,A),q=!0)},o(A){C(W),C(c.$$.fragment,A),q=!1},d(A){A&&P(e),W&&W.d(),Y(c),l[15](null),l[16](null);for(let U=0;U<b.length;U+=1)b[U].d();T=!1,Ne(y)}}}function pl(l,e,n){let t;St(l,ke,y=>n(6,t=y));let{slot:r}=e,{selectedLayer:s}=e,{selectedSlot:o}=e,i,f;function a(){let y=i.files[0],W=new FileReader;W.onload=()=>{let B=new Image;B.onload=()=>{let ee={width:B.width,height:B.height};if(B.width>B.height){if(B.width>512){let le=B.width/512;ee.width/=le,ee.height/=le}}else if(B.height>512){let le=B.height/512;ee.width/=le,ee.height/=le}let se={name:y.name,image:B,pos:{x:56-ee.width/2,y:80-ee.height/2},rect:ee};n(1,s=0),n(0,r.layers=[se,...r.layers],r)},B.src=W.result},W.readAsDataURL(y),f.reset()}let u=!1;function _(y,W){n(5,u=W);let B=y.target.parentElement;y.dataTransfer.dropEffect="move",y.dataTransfer.effectAllowed="move",y.dataTransfer.setData("text/plain",r.layers[W].name),y.dataTransfer.setDragImage(B,B.clientWidth/2,B.clientHeight/2)}function c(y,W){if(u===!1)return;y.preventDefault();let B=r.layers[u],ee=r.layers[W];n(0,r.layers[W]=B,r),n(0,r.layers[u]=ee,r),n(5,u=W),y.dataTransfer.dropEffect="move",n(1,s=W)}const I=()=>{n(2,o=(15+o-1)%15),n(1,s=void 0)};function h(y){l.$$.not_equal(r.color,y)&&(r.color=y,n(0,r))}function E(){r.name=this.value,n(0,r)}const g=()=>{n(2,o=(o+1)%15),n(1,s=void 0)};function d(y){l.$$.not_equal(r.background,y)&&(r.background=y,n(0,r))}function z(y){te[y?"unshift":"push"](()=>{i=y,n(3,i)})}function b(y){te[y?"unshift":"push"](()=>{f=y,n(4,f)})}const L=(y,W)=>_(W,y),F=()=>{n(5,u=!1)},K=()=>{},Z=(y,W)=>{n(0,r.layers=r.layers.filter(B=>B!==y),r),n(1,s=s>W?s-1:s<W?s:void 0)},w=y=>n(1,s=y),q=(y,W)=>c(W,y),T=()=>i.click();return l.$$set=y=>{"slot"in y&&n(0,r=y.slot),"selectedLayer"in y&&n(1,s=y.selectedLayer),"selectedSlot"in y&&n(2,o=y.selectedSlot)},[r,s,o,i,f,u,t,a,_,c,I,h,E,g,d,z,b,L,F,K,Z,w,q,T]}class _l extends he{constructor(e){super(),pe(this,e,pl,hl,_e,{slot:0,selectedLayer:1,selectedSlot:2})}}function ot(l){let e,n,t;const r=[{texture:l[1]},l[2]];function s(i){l[7](i)}let o={};for(let i=0;i<r.length;i+=1)o=Ce(o,r[i]);return l[0]!==void 0&&(o.instance=l[0]),e=new ce({props:o}),te.push(()=>fe(e,"instance",s)),{c(){J(e.$$.fragment)},m(i,f){j(e,i,f),t=!0},p(i,f){const a=f&6?Ue(r,[f&2&&{texture:i[1]},f&4&&Re(i[2])]):{};!n&&f&1&&(n=!0,a.instance=i[0],ue(()=>n=!1)),e.$set(a)},i(i){t||(S(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){Y(e,i)}}}function ml(l){let e,n,t=l[1]&&ot(l);return{c(){t&&t.c(),e=Ae()},m(r,s){t&&t.m(r,s),D(r,e,s),n=!0},p(r,[s]){r[1]?t?(t.p(r,s),s&2&&S(t,1)):(t=ot(r),t.c(),S(t,1),t.m(e.parentNode,e)):t&&(de(),C(t,1,1,()=>{t=null}),ge())},i(r){n||(S(t),n=!0)},o(r){C(t),n=!1},d(r){t&&t.d(r),r&&P(e)}}}function bl(l,e,n){const t=["width","height","texture","instance"];let r=xe(e,t),{width:s}=e,{height:o}=e,{texture:i}=e,{instance:f=void 0}=e,a={width:-1,height:-1},u;function _(c){f=c,n(0,f)}return l.$$set=c=>{e=Ce(Ce({},e),qt(c)),n(2,r=xe(e,t)),"width"in c&&n(3,s=c.width),"height"in c&&n(4,o=c.height),"texture"in c&&n(5,i=c.texture),"instance"in c&&n(0,f=c.instance)},l.$$.update=()=>{if(l.$$.dirty&120&&i&&!Le.isEqual(a,{width:s,height:o})){n(6,a={width:s,height:o});let{app:c}=Je(),I=new ze(i);I.width=s,I.height=o,n(1,u=c.renderer.generateTexture(I,{scaleMode:ve.LINEAR,region:new Ie(0,0,s,o)}))}},[f,u,r,s,o,i,a,_]}class wl extends he{constructor(e){super(),pe(this,e,bl,ml,_e,{width:3,height:4,texture:5,instance:0})}}function kl(l){let e,n;return e=new ce({props:{texture:l[5]}}),{c(){J(e.$$.fragment)},m(t,r){j(e,t,r),n=!0},p(t,r){const s={};r&32&&(s.texture=t[5]),e.$set(s)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function Al(l){let e,n;return e=new Me({props:{$$slots:{default:[yl]},$$scope:{ctx:l}}}),{c(){J(e.$$.fragment)},m(t,r){j(e,t,r),n=!0},p(t,r){const s={};r&16415&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function yl(l){let e,n,t,r,s,o;e=new ce({props:{texture:l[3]}});const i=[{texture:l[2]},l[0].layers[l[1]].pos];let f={};for(let a=0;a<i.length;a+=1)f=Ce(f,i[a]);return t=new ce({props:f}),s=new ce({props:{texture:l[4]}}),{c(){J(e.$$.fragment),n=N(),J(t.$$.fragment),r=N(),J(s.$$.fragment)},m(a,u){j(e,a,u),D(a,n,u),j(t,a,u),D(a,r,u),j(s,a,u),o=!0},p(a,u){const _={};u&8&&(_.texture=a[3]),e.$set(_);const c=u&7?Ue(i,[u&4&&{texture:a[2]},u&3&&Re(a[0].layers[a[1]].pos)]):{};t.$set(c);const I={};u&16&&(I.texture=a[4]),s.$set(I)},i(a){o||(S(e.$$.fragment,a),S(t.$$.fragment,a),S(s.$$.fragment,a),o=!0)},o(a){C(e.$$.fragment,a),C(t.$$.fragment,a),C(s.$$.fragment,a),o=!1},d(a){Y(e,a),a&&P(n),Y(t,a),a&&P(r),Y(s,a)}}}function Sl(l){let e,n,t,r;const s=[Al,kl],o=[];function i(f,a){return f[4]&&f[3]&&f[2]?0:f[5]?1:-1}return~(e=i(l))&&(n=o[e]=s[e](l)),{c(){n&&n.c(),t=Ae()},m(f,a){~e&&o[e].m(f,a),D(f,t,a),r=!0},p(f,[a]){let u=e;e=i(f),e===u?~e&&o[e].p(f,a):(n&&(de(),C(o[u],1,1,()=>{o[u]=null}),ge()),~e?(n=o[e],n?n.p(f,a):(n=o[e]=s[e](f),n.c()),S(n,1),n.m(t.parentNode,t)):n=null)},i(f){r||(S(n),r=!0)},o(f){C(n),r=!1},d(f){~e&&o[e].d(f),f&&P(t)}}}function zl(l,e,n){let t,{renderSlot:r}=e,{selectedLayer:s}=e,o={},i=new WeakMap,f={width:-1,height:-1},a,{app:u}=Je(),_,c,I,h;function E(d){if(!i.has(d.image)){let z=new ae(new Ee(d.image)),b=new ze(z);b.x=d.pos.x,b.y=d.pos.y,b.width=d.rect.width,b.height=d.rect.height,i.set(d.image,u.renderer.generateTexture(b,{scaleMode:ve.LINEAR,region:new Ie(0,0,117,166),multisample:Yt.HIGH}))}return i.get(d.image)}function g(d){let z=new Ct;for(let b of[...d].reverse())z.addChild(new ze(E(b)));return u.renderer.generateTexture(z,{scaleMode:ve.NEAREST,region:new Ie(0,0,117,166)})}return l.$$set=d=>{"renderSlot"in d&&n(0,r=d.renderSlot),"selectedLayer"in d&&n(1,s=d.selectedLayer)},l.$$.update=()=>{if(l.$$.dirty&3&&n(9,t=s!==void 0?r.layers[s].rect:void 0),l.$$.dirty&3&&s!==void 0&&(i.delete(r.layers[s].image),n(7,f={width:-1,height:-1}),n(2,a=void 0)),l.$$.dirty&67&&(Le.isEqual(o,{selected:s,layers:r.layers.map(d=>d.image.src)})||(n(6,o={selected:s,layers:r.layers.map(d=>d.image.src)}),n(8,h=s!==void 0?new ae(new Ee(r.layers[s].image)):void 0),n(3,_=s!==void 0?g(r.layers.slice(s+1)):void 0),n(4,c=s!==void 0?g(r.layers.slice(0,s)):void 0),n(5,I=s===void 0?g(r.layers):void 0))),l.$$.dirty&896&&h&&!Le.isEqual(f,t)){n(7,f={...t});let d=new ze(h);d.width=f.width,d.height=f.height,n(2,a=u.renderer.generateTexture(d,{scaleMode:ve.NEAREST,region:new Ie(0,0,f.width,f.height)}))}},[r,s,a,_,c,I,o,f,h,t]}class vl extends he{constructor(e){super(),pe(this,e,zl,Sl,_e,{renderSlot:0,selectedLayer:1})}}const Cl=l=>({fonts:l&1}),it=l=>({fonts:l[0]});function Il(l){return{c:x,m:x,p:x,i:x,o:x,d:x}}function Wl(l){let e;const n=l[3].default,t=Nt(n,l,l[2],it);return{c(){t&&t.c()},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&5)&&Ut(t,n,r,r[2],e?Bt(n,r[2],s,Cl):Rt(r[2]),it)},i(r){e||(S(t,r),e=!0)},o(r){C(t,r),e=!1},d(r){t&&t.d(r)}}}function Ml(l){return{c:x,m:x,p:x,i:x,o:x,d:x}}function Tl(l){let e,n,t,r={ctx:l,current:null,token:null,hasCatch:!1,pending:Ml,then:Wl,catch:Il,blocks:[,,,]};return $e(n=l[1],r),{c(){e=Ae(),r.block.c()},m(s,o){D(s,e,o),r.block.m(s,r.anchor=o),r.mount=()=>e.parentNode,r.anchor=e,t=!0},p(s,[o]){l=s,r.ctx=l,o&2&&n!==(n=l[1])&&$e(n,r)||Et(r,l,o)},i(s){t||(S(r.block),t=!0)},o(s){for(let o=0;o<3;o+=1){const i=r.blocks[o];C(i)}t=!1},d(s){s&&P(e),r.block.d(s),r.token=null,r=null}}}function Ll(l,e,n){let t,{$$slots:r={},$$scope:s}=e,{fonts:o}=e;return l.$$set=i=>{"fonts"in i&&n(0,o=i.fonts),"$$scope"in i&&n(2,s=i.$$scope)},l.$$.update=()=>{l.$$.dirty&1&&n(1,t=Promise.all(o.map(i=>new Vt(i).load())))},[o,t,s,r]}class ql extends he{constructor(e){super(),pe(this,e,Ll,Tl,_e,{fonts:0})}}function at(l){let e,n;return e=new ce({props:{texture:l[3],x:l[0],y:l[1],anchor:l[2]}}),{c(){J(e.$$.fragment)},m(t,r){j(e,t,r),n=!0},p(t,r){const s={};r&8&&(s.texture=t[3]),r&1&&(s.x=t[0]),r&2&&(s.y=t[1]),r&4&&(s.anchor=t[2]),e.$set(s)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function El(l){let e,n,t=l[3]&&at(l);return{c(){t&&t.c(),e=Ae()},m(r,s){t&&t.m(r,s),D(r,e,s),n=!0},p(r,[s]){r[3]?t?(t.p(r,s),s&8&&S(t,1)):(t=at(r),t.c(),S(t,1),t.m(e.parentNode,e)):t&&(de(),C(t,1,1,()=>{t=null}),ge())},i(r){n||(S(t),n=!0)},o(r){C(t),n=!1},d(r){t&&t.d(r),r&&P(e)}}}function Vl(l,e,n){let{text:t}=e,{style:r={}}=e,{maxWidth:s}=e,{maxHeight:o}=e,{x:i=0}=e,{y:f=0}=e,{anchor:a=0}=e,u,_={};function c(h,E){let g=new tt(h);g.wordWrapWidth=E;let d=Kt.measureText(t,g,g.wordWrap),z=1;return d.width>s&&(z=s/d.width),d.height*z>o&&(z*=o/(d.height*z)),z}function I(){n(8,_={text:t,style:r});let{app:h}=Je(),E=new tt({...r,wordWrap:!0,wordWrapWidth:s}),g=c(E,s);if(g<1){let z=s/g,b=z;for(g=c(E,z);b>2;){b/=2;let L={width:z-b,scale:c(E,z-b)},F={width:z+b,scale:c(E,z+b)};if(L.scale>g&&L.scale>F.scale){z=L.width,g=L.scale;continue}if(F.scale>g&&F.scale>L.scale){z=F.width,g=F.scale;continue}}E.wordWrapWidth=z}let d=new Ht(t,E);return d.width*=g,d.height*=g,h.renderer.generateTexture(d,{scaleMode:ve.LINEAR,region:new Ie(0,0,d.width,d.height)})}return l.$$set=h=>{"text"in h&&n(4,t=h.text),"style"in h&&n(5,r=h.style),"maxWidth"in h&&n(6,s=h.maxWidth),"maxHeight"in h&&n(7,o=h.maxHeight),"x"in h&&n(0,i=h.x),"y"in h&&n(1,f=h.y),"anchor"in h&&n(2,a=h.anchor)},l.$$.update=()=>{l.$$.dirty&304&&(Le.isEqual(_,{text:t,style:r})||n(3,u=I()))},[i,f,a,u,t,r,s,o,_]}class Nl extends he{constructor(e){super(),pe(this,e,Vl,El,_e,{text:4,style:5,maxWidth:6,maxHeight:7,x:0,y:1,anchor:2})}}const{document:ft}=Dt;function ut(l,e,n){const t=l.slice();return t[23]=e[n],t[25]=n,t}function ct(l,e,n){const t=l.slice();return t[26]=e[n],t[25]=n,t}function Fe(l){const e=l.slice(),n=e[3][e[0]];e[23]=n;const t=e[23].layers[e[4]];return e[26]=t,e}function dt(l,e,n){const t=l.slice();return t[23]=e[n],t}function gt(l,e,n){const t=l.slice();return t[23]=e[n],t[30]=e,t[25]=n,t}function Ul(l){let e,n,t,r,s,o,i;function f(u){l[9](u,l[25])}let a={texture:ae.from(je),x:-2,y:-2};return l[2][l[25]]!==void 0&&(a.instance=l[2][l[25]]),e=new ce({props:a}),te.push(()=>fe(e,"instance",f)),r=new ce({props:{texture:ae.WHITE,filters:[new qe(We(l[23].background))],width:117,height:166}}),o=new vl({props:{renderSlot:l[23],selectedLayer:l[0]===l[25]?l[4]:void 0}}),{c(){J(e.$$.fragment),t=N(),J(r.$$.fragment),s=N(),J(o.$$.fragment)},m(u,_){j(e,u,_),D(u,t,_),j(r,u,_),D(u,s,_),j(o,u,_),i=!0},p(u,_){l=u;const c={};!n&&_[0]&12&&(n=!0,c.instance=l[2][l[25]],ue(()=>n=!1)),e.$set(c);const I={};_[0]&8&&(I.filters=[new qe(We(l[23].background))]),r.$set(I);const h={};_[0]&8&&(h.renderSlot=l[23]),_[0]&25&&(h.selectedLayer=l[0]===l[25]?l[4]:void 0),o.$set(h)},i(u){i||(S(e.$$.fragment,u),S(r.$$.fragment,u),S(o.$$.fragment,u),i=!0)},o(u){C(e.$$.fragment,u),C(r.$$.fragment,u),C(o.$$.fragment,u),i=!1},d(u){Y(e,u),u&&P(t),Y(r,u),u&&P(s),Y(o,u)}}}function ht(l,e){let n,t,r;const s=[{mask:e[2][e[25]]},e[23].pos,{zIndex:1}];let o={$$slots:{default:[Ul]},$$scope:{ctx:e}};for(let i=0;i<s.length;i+=1)o=Ce(o,s[i]);return t=new Me({props:o}),{key:l,first:null,c(){n=Ae(),J(t.$$.fragment),this.first=n},m(i,f){D(i,n,f),j(t,i,f),r=!0},p(i,f){e=i;const a=f[0]&12?Ue(s,[{mask:e[2][e[25]]},f[0]&8&&Re(e[23].pos),s[2]]):{};f[0]&29|f[1]&1&&(a.$$scope={dirty:f,ctx:e}),t.$set(a)},i(i){r||(S(t.$$.fragment,i),r=!0)},o(i){C(t.$$.fragment,i),r=!1},d(i){i&&P(n),Y(t,i)}}}function pt(l){let e,n;return e=new Me({props:{x:l[23].pos.x+1,y:l[23].pos.y+167,zIndex:3,$$slots:{default:[Rl]},$$scope:{ctx:l}}}),{c(){J(e.$$.fragment)},m(t,r){j(e,t,r),n=!0},p(t,r){const s={};r[0]&8&&(s.x=t[23].pos.x+1),r[0]&8&&(s.y=t[23].pos.y+167),r[0]&8|r[1]&1&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function Rl(l){let e,n,t,r;return e=new ce({props:{texture:ae.from(Wt)}}),t=new Nl({props:{text:l[23].name.trim(),style:{fill:We(l[23].color),breakWords:!0,fontFamily:["Noto Sans TC","Noto Sans SC","Noto Sans JP","sans-serif"],fontSize:15,fontWeight:"bold",align:"center",textBaseline:"alphabetic"},anchor:.5,x:56,y:14,maxWidth:108,maxHeight:26}}),{c(){J(e.$$.fragment),n=N(),J(t.$$.fragment)},m(s,o){j(e,s,o),D(s,n,o),j(t,s,o),r=!0},p(s,o){const i={};o[0]&8&&(i.text=s[23].name.trim()),o[0]&8&&(i.style={fill:We(s[23].color),breakWords:!0,fontFamily:["Noto Sans TC","Noto Sans SC","Noto Sans JP","sans-serif"],fontSize:15,fontWeight:"bold",align:"center",textBaseline:"alphabetic"}),t.$set(i)},i(s){r||(S(e.$$.fragment,s),S(t.$$.fragment,s),r=!0)},o(s){C(e.$$.fragment,s),C(t.$$.fragment,s),r=!1},d(s){Y(e,s),s&&P(n),Y(t,s)}}}function _t(l){var r;let e,n,t=((r=l[23].name)==null?void 0:r.length)&&pt(l);return{c(){t&&t.c(),e=Ae()},m(s,o){t&&t.m(s,o),D(s,e,o),n=!0},p(s,o){var i;(i=s[23].name)!=null&&i.length?t?(t.p(s,o),o[0]&8&&S(t,1)):(t=pt(s),t.c(),S(t,1),t.m(e.parentNode,e)):t&&(de(),C(t,1,1,()=>{t=null}),ge())},i(s){n||(S(t),n=!0)},o(s){C(t),n=!1},d(s){t&&t.d(s),s&&P(e)}}}function mt(l){let e,n,t,r;e=new ce({props:{texture:ae.WHITE,width:680,height:680,filters:[new qe(0)]}});const s=[{texture:new ae(new Ee(l[26].image))},{alpha:.75},{x:l[23].pos.x+l[26].pos.x},{y:l[23].pos.y+l[26].pos.y},l[26].rect];let o={};for(let i=0;i<s.length;i+=1)o=Ce(o,s[i]);return t=new wl({props:o}),{c(){J(e.$$.fragment),n=N(),J(t.$$.fragment)},m(i,f){j(e,i,f),D(i,n,f),j(t,i,f),r=!0},p(i,f){const a=f[0]&25?Ue(s,[{texture:new ae(new Ee(i[26].image))},s[1],f[0]&25&&{x:i[23].pos.x+i[26].pos.x},f[0]&25&&{y:i[23].pos.y+i[26].pos.y},f[0]&25&&Re(i[26].rect)]):{};t.$set(a)},i(i){r||(S(e.$$.fragment,i),S(t.$$.fragment,i),r=!0)},o(i){C(e.$$.fragment,i),C(t.$$.fragment,i),r=!1},d(i){Y(e,i),i&&P(n),Y(t,i)}}}function Bl(l){let e,n,t=l[0]!==void 0&&l[4]!==void 0&&mt(Fe(l));return{c(){t&&t.c(),e=Ae()},m(r,s){t&&t.m(r,s),D(r,e,s),n=!0},p(r,s){r[0]!==void 0&&r[4]!==void 0?t?(t.p(Fe(r),s),s[0]&17&&S(t,1)):(t=mt(Fe(r)),t.c(),S(t,1),t.m(e.parentNode,e)):t&&(de(),C(t,1,1,()=>{t=null}),ge())},i(r){n||(S(t),n=!0)},o(r){C(t),n=!1},d(r){t&&t.d(r),r&&P(e)}}}function Fl(l){let e,n,t=[],r=new Map,s,o,i,f,a,u;e=new ce({props:{texture:ae.WHITE,width:680,height:680,zIndex:0}});let _=l[3];const c=g=>g[23];for(let g=0;g<_.length;g+=1){let d=gt(l,_,g),z=c(d);r.set(z,t[g]=ht(z,d))}o=new ce({props:{texture:ae.from(l[6].lang==="zh-TW"?Oe:De),width:680,height:680,zIndex:2}});let I=l[3],h=[];for(let g=0;g<I.length;g+=1)h[g]=_t(dt(l,I,g));const E=g=>C(h[g],1,1,()=>{h[g]=null});return a=new Me({props:{mask:l[5],alpha:.8,zIndex:4,$$slots:{default:[Bl]},$$scope:{ctx:l}}}),{c(){J(e.$$.fragment),n=N();for(let g=0;g<t.length;g+=1)t[g].c();s=N(),J(o.$$.fragment),i=N();for(let g=0;g<h.length;g+=1)h[g].c();f=N(),J(a.$$.fragment)},m(g,d){j(e,g,d),D(g,n,d);for(let z=0;z<t.length;z+=1)t[z].m(g,d);D(g,s,d),j(o,g,d),D(g,i,d);for(let z=0;z<h.length;z+=1)h[z].m(g,d);D(g,f,d),j(a,g,d),u=!0},p(g,d){d[0]&29&&(_=g[3],de(),t=Qe(t,d,c,1,g,_,r,s.parentNode,jt,ht,s,gt),ge());const z={};if(d[0]&64&&(z.texture=ae.from(g[6].lang==="zh-TW"?Oe:De)),o.$set(z),d[0]&8){I=g[3];let L;for(L=0;L<I.length;L+=1){const F=dt(g,I,L);h[L]?(h[L].p(F,d),S(h[L],1)):(h[L]=_t(F),h[L].c(),S(h[L],1),h[L].m(f.parentNode,f))}for(de(),L=I.length;L<h.length;L+=1)E(L);ge()}const b={};d[0]&32&&(b.mask=g[5]),d[0]&25|d[1]&1&&(b.$$scope={dirty:d,ctx:g}),a.$set(b)},i(g){if(!u){S(e.$$.fragment,g);for(let d=0;d<_.length;d+=1)S(t[d]);S(o.$$.fragment,g);for(let d=0;d<I.length;d+=1)S(h[d]);S(a.$$.fragment,g),u=!0}},o(g){C(e.$$.fragment,g);for(let d=0;d<t.length;d+=1)C(t[d]);C(o.$$.fragment,g),h=h.filter(Boolean);for(let d=0;d<h.length;d+=1)C(h[d]);C(a.$$.fragment,g),u=!1},d(g){Y(e,g),g&&P(n);for(let d=0;d<t.length;d+=1)t[d].d(g);g&&P(s),Y(o,g),g&&P(i),vt(h,g),g&&P(f),Y(a,g)}}}function Ol(l){let e,n;return e=new Me({props:{sortableChildren:!0,$$slots:{default:[Fl]},$$scope:{ctx:l}}}),{c(){J(e.$$.fragment)},m(t,r){j(e,t,r),n=!0},p(t,r){const s={};r[0]&125|r[1]&1&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function Dl(l){let e,n;return e=new ql({props:{fonts:["Noto Sans TC","Noto Sans SC","Noto Sans JP"],$$slots:{default:[Ol]},$$scope:{ctx:l}}}),{c(){J(e.$$.fragment)},m(t,r){j(e,t,r),n=!0},p(t,r){const s={};r[0]&125|r[1]&1&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function Pl(l){let e,n;return e=new Pt({props:{resources:[Oe,De,je,Wt],$$slots:{default:[Dl]},$$scope:{ctx:l}}}),{c(){J(e.$$.fragment)},m(t,r){j(e,t,r),n=!0},p(t,r){const s={};r[0]&125|r[1]&1&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function Ql(l){let e=[],n=new Map,t,r,s,o=[...l[23].layers].reverse();const i=a=>a[26].image;for(let a=0;a<o.length;a+=1){let u=ct(l,o,a),_=i(u);n.set(_,e[a]=bt(_,u))}let f=l[4]!==void 0&&wt(l);return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=N(),f&&f.c(),r=Ae()},m(a,u){for(let _=0;_<e.length;_+=1)e[_].m(a,u);D(a,t,u),f&&f.m(a,u),D(a,r,u),s=!0},p(a,u){u[0]&24&&(o=[...a[23].layers].reverse(),e=Qe(e,u,i,1,a,o,n,t.parentNode,zt,bt,t,ct)),a[4]!==void 0?f?(f.p(a,u),u[0]&16&&S(f,1)):(f=wt(a),f.c(),S(f,1),f.m(r.parentNode,r)):f&&(de(),C(f,1,1,()=>{f=null}),ge())},i(a){s||(S(f),s=!0)},o(a){C(f),s=!1},d(a){for(let u=0;u<e.length;u+=1)e[u].d(a);a&&P(t),f&&f.d(a),a&&P(r)}}}function Jl(l){let e,n,t;function r(){return l[11](l[25])}return{c(){e=v("button"),m(e,"class","block h-full w-full")},m(s,o){D(s,e,o),n||(t=H(e,"click",r),n=!0)},p(s,o){l=s},i:x,o:x,d(s){s&&P(e),n=!1,t()}}}function bt(l,e){let n,t,r;function s(){return e[12](e[23],e[25])}return{key:l,first:null,c(){n=v("div"),m(n,"class","absolute z-10"),R(n,"top",e[26].pos.y+"px"),R(n,"left",e[26].pos.x+"px"),R(n,"width",e[26].rect.width+"px"),R(n,"height",e[26].rect.height+"px"),this.first=n},m(o,i){D(o,n,i),t||(r=H(n,"mousedown",s),t=!0)},p(o,i){e=o,i[0]&8&&R(n,"top",e[26].pos.y+"px"),i[0]&8&&R(n,"left",e[26].pos.x+"px"),i[0]&8&&R(n,"width",e[26].rect.width+"px"),i[0]&8&&R(n,"height",e[26].rect.height+"px")},d(o){o&&P(n),t=!1,r()}}}function wt(l){let e,n,t,r,s,o;function i(c){l[13](c)}function f(c){l[14](c)}function a(c){l[15](c)}function u(c){l[16](c)}let _={ratio:l[3][l[0]].layers[l[4]].image.width/l[3][l[0]].layers[l[4]].image.height};return l[3][l[0]].layers[l[4]].pos.x!==void 0&&(_.x=l[3][l[0]].layers[l[4]].pos.x),l[3][l[0]].layers[l[4]].pos.y!==void 0&&(_.y=l[3][l[0]].layers[l[4]].pos.y),l[3][l[0]].layers[l[4]].rect.width!==void 0&&(_.width=l[3][l[0]].layers[l[4]].rect.width),l[3][l[0]].layers[l[4]].rect.height!==void 0&&(_.height=l[3][l[0]].layers[l[4]].rect.height),e=new el({props:_}),te.push(()=>fe(e,"x",i)),te.push(()=>fe(e,"y",f)),te.push(()=>fe(e,"width",a)),te.push(()=>fe(e,"height",u)),{c(){J(e.$$.fragment)},m(c,I){j(e,c,I),o=!0},p(c,I){const h={};I[0]&25&&(h.ratio=c[3][c[0]].layers[c[4]].image.width/c[3][c[0]].layers[c[4]].image.height),!n&&I[0]&25&&(n=!0,h.x=c[3][c[0]].layers[c[4]].pos.x,ue(()=>n=!1)),!t&&I[0]&25&&(t=!0,h.y=c[3][c[0]].layers[c[4]].pos.y,ue(()=>t=!1)),!r&&I[0]&25&&(r=!0,h.width=c[3][c[0]].layers[c[4]].rect.width,ue(()=>r=!1)),!s&&I[0]&25&&(s=!0,h.height=c[3][c[0]].layers[c[4]].rect.height,ue(()=>s=!1)),e.$set(h)},i(c){o||(S(e.$$.fragment,c),o=!0)},o(c){C(e.$$.fragment,c),o=!1},d(c){Y(e,c)}}}function kt(l){let e,n,t,r,s;const o=[Jl,Ql],i=[];function f(a,u){return a[0]!==a[25]?0:1}return n=f(l),t=i[n]=o[n](l),{c(){e=v("div"),t.c(),r=N(),m(e,"class","slot svelte-p2cpum"),R(e,"left",l[23].pos.x+"px"),R(e,"top",l[23].pos.y+"px"),M(e,"outline",l[0]===l[25])},m(a,u){D(a,e,u),i[n].m(e,null),p(e,r),s=!0},p(a,u){let _=n;n=f(a),n===_?i[n].p(a,u):(de(),C(i[_],1,1,()=>{i[_]=null}),ge(),t=i[n],t?t.p(a,u):(t=i[n]=o[n](a),t.c()),S(t,1),t.m(e,r)),(!s||u[0]&8)&&R(e,"left",a[23].pos.x+"px"),(!s||u[0]&8)&&R(e,"top",a[23].pos.y+"px"),(!s||u[0]&1)&&M(e,"outline",a[0]===a[25])},i(a){s||(S(t),s=!0)},o(a){C(t),s=!1},d(a){a&&P(e),i[n].d()}}}function At(l){let e,n,t,r,s;function o(u){l[17](u)}function i(u){l[18](u)}function f(u){l[19](u)}let a={};return l[3][l[0]]!==void 0&&(a.slot=l[3][l[0]]),l[4]!==void 0&&(a.selectedLayer=l[4]),l[0]!==void 0&&(a.selectedSlot=l[0]),e=new _l({props:a}),te.push(()=>fe(e,"slot",o)),te.push(()=>fe(e,"selectedLayer",i)),te.push(()=>fe(e,"selectedSlot",f)),{c(){J(e.$$.fragment)},m(u,_){j(e,u,_),s=!0},p(u,_){const c={};!n&&_[0]&9&&(n=!0,c.slot=u[3][u[0]],ue(()=>n=!1)),!t&&_[0]&16&&(t=!0,c.selectedLayer=u[4],ue(()=>t=!1)),!r&&_[0]&1&&(r=!0,c.selectedSlot=u[0],ue(()=>r=!1)),e.$set(c)},i(u){s||(S(e.$$.fragment,u),s=!0)},o(u){C(e.$$.fragment,u),s=!1},d(u){Y(e,u)}}}function jl(l){let e,n,t,r,s,o,i,f,a,u,_,c=l[6]("label.export")+"",I,h,E,g,d,z,b=l[6]("label.language")+"",L,F,K,Z,w,q,T,y=l[6]("label.credit")+"",W,B,ee,se,le=l[6]("label.translate")+"",k,A,U,O,G=l[6]("label.code")+"",ie,ne,oe,Be,Ye;ft.title=e=l[6]("title");function Mt(V){l[10](V)}let He={width:680,height:680,backgroundColor:l[7],antialias:!0,resolution:1,render:"demand",$$slots:{default:[Pl]},$$scope:{ctx:l}};l[1]!==void 0&&(He.instance=l[1]),o=new Ft({props:He}),te.push(()=>fe(o,"instance",Mt));let ye=l[3],X=[];for(let V=0;V<ye.length;V+=1)X[V]=kt(ut(l,ye,V));const Tt=V=>C(X[V],1,1,()=>{X[V]=null});let $=l[0]!==void 0&&At(l);return{c(){n=N(),t=v("div"),r=v("div"),s=v("div"),J(o.$$.fragment),f=N();for(let V=0;V<X.length;V+=1)X[V].c();a=N(),u=v("div"),_=v("button"),I=me(c),h=N(),E=v("div"),$&&$.c(),g=N(),d=v("div"),z=v("p"),L=me(b),F=N(),K=v("select"),Z=v("option"),Z.textContent="中文",w=v("option"),w.textContent="English",q=N(),T=v("p"),W=me(y),B=v("a"),B.textContent="@EastAiruier",ee=N(),se=v("p"),k=me(le),A=v("a"),A.textContent="@Ichiroku16_Vt",U=N(),O=v("p"),ie=me(G),ne=v("a"),ne.textContent="eslym/vtuber-preference",m(s,"class","template svelte-p2cpum"),m(r,"class","flex flex-grow flex-row items-center justify-center overflow-hidden shadow-lg"),m(_,"class","bg-indigo-600 p-2 text-center text-lg font-bold text-white"),m(E,"class","h-0 flex-grow"),Z.__value="zh-TW",Z.value=Z.__value,w.__value="en",w.value=w.__value,l[6].lang===void 0&&Ot(()=>l[20].call(K)),m(z,"class","font-bold not-italic"),m(B,"class","text-blue-700"),m(B,"target","_blank"),m(B,"rel","noreferrer"),m(B,"href","https://twitter.com/EastAiruier/status/1624174786359496704"),m(T,"class","mt-2"),m(A,"class","text-blue-700"),m(A,"target","_blank"),m(A,"rel","noreferrer"),m(A,"href","https://twitter.com/Ichiroku16_Vt/status/1628215427733266432"),m(se,"class","mt-2"),m(ne,"href","https://github.com/eslym/vtuber-preference"),m(ne,"class","text-blue-700"),m(ne,"target","_blank"),m(ne,"rel","noreferrer"),m(O,"class","mt-2"),m(d,"class","py-2 text-center text-sm italic"),m(u,"class","flex h-full w-80 flex-col overflow-auto border-slate-200 bg-white shadow"),m(t,"class","flex h-screen w-screen flex-row bg-opacity-90"),M(t,"bg-black",l[0]!==void 0&&l[4]!==void 0)},m(V,Q){D(V,n,Q),D(V,t,Q),p(t,r),p(r,s),j(o,s,null),p(s,f);for(let Se=0;Se<X.length;Se+=1)X[Se].m(s,null);p(t,a),p(t,u),p(u,_),p(_,I),p(u,h),p(u,E),$&&$.m(E,null),p(u,g),p(u,d),p(d,z),p(z,L),p(z,F),p(z,K),p(K,Z),p(K,w),et(K,l[6].lang),p(d,q),p(d,T),p(T,W),p(T,B),p(d,ee),p(d,se),p(se,k),p(se,A),p(d,U),p(d,O),p(O,ie),p(O,ne),oe=!0,Be||(Ye=[H(_,"click",l[8]),H(K,"change",l[20])],Be=!0)},p(V,Q){(!oe||Q[0]&64)&&e!==(e=V[6]("title"))&&(ft.title=e);const Se={};if(Q[0]&125|Q[1]&1&&(Se.$$scope={dirty:Q,ctx:V}),!i&&Q[0]&2&&(i=!0,Se.instance=V[1],ue(()=>i=!1)),o.$set(Se),Q[0]&25){ye=V[3];let re;for(re=0;re<ye.length;re+=1){const Ke=ut(V,ye,re);X[re]?(X[re].p(Ke,Q),S(X[re],1)):(X[re]=kt(Ke),X[re].c(),S(X[re],1),X[re].m(s,null))}for(de(),re=ye.length;re<X.length;re+=1)Tt(re);ge()}(!oe||Q[0]&64)&&c!==(c=V[6]("label.export")+"")&&be(I,c),V[0]!==void 0?$?($.p(V,Q),Q[0]&1&&S($,1)):($=At(V),$.c(),S($,1),$.m(E,null)):$&&(de(),C($,1,1,()=>{$=null}),ge()),(!oe||Q[0]&64)&&b!==(b=V[6]("label.language")+"")&&be(L,b),Q[0]&64&&et(K,V[6].lang),(!oe||Q[0]&64)&&y!==(y=V[6]("label.credit")+"")&&be(W,y),(!oe||Q[0]&64)&&le!==(le=V[6]("label.translate")+"")&&be(k,le),(!oe||Q[0]&64)&&G!==(G=V[6]("label.code")+"")&&be(ie,G),(!oe||Q[0]&17)&&M(t,"bg-black",V[0]!==void 0&&V[4]!==void 0)},i(V){if(!oe){S(o.$$.fragment,V);for(let Q=0;Q<ye.length;Q+=1)S(X[Q]);S($),oe=!0}},o(V){C(o.$$.fragment,V),X=X.filter(Boolean);for(let Q=0;Q<X.length;Q+=1)C(X[Q]);C($),oe=!1},d(V){V&&P(n),V&&P(t),Y(o),vt(X,V),$&&$.d(),Be=!1,Ne(Ye)}}}function Yl(l,e,n){let t,r;St(l,ke,T=>n(6,r=T));let s=[],o=[],i=[{background:"#ffffff",color:"#000000",pos:{x:48,y:48},layers:[]},{background:"#ffffff",color:"#000000",pos:{x:166,y:48},layers:[]},{background:"#ffffff",color:"#000000",pos:{x:283,y:48},layers:[]},{background:"#ffffff",color:"#000000",pos:{x:401,y:48},layers:[]},{background:"#ffffff",color:"#000000",pos:{x:519,y:48},layers:[]},{background:"#ffffff",color:"#000000",pos:{x:48,y:248},layers:[]},{background:"#ffffff",color:"#000000",pos:{x:166,y:248},layers:[]},{background:"#ffffff",color:"#ff0000",pos:{x:283,y:248},layers:[]},{background:"#ffffff",color:"#000000",pos:{x:401,y:248},layers:[]},{background:"#ffffff",color:"#000000",pos:{x:519,y:248},layers:[]},{background:"#ffffff",color:"#000000",pos:{x:48,y:448},layers:[]},{background:"#ffffff",color:"#000000",pos:{x:166,y:448},layers:[]},{background:"#ffffff",color:"#000000",pos:{x:283,y:448},layers:[]},{background:"#ffffff",color:"#000000",pos:{x:401,y:448},layers:[]},{background:"#ffffff",color:"#000000",pos:{x:519,y:448},layers:[]}];const f=We("#ffffff");let a,u,_;function c(){if(!o[a]){let T=i[a],y=new Ct,W=y.addChild(new ze(ae.WHITE));W.width=680,W.height=680;let B=y.addChild(new ze(ae.from(je)));B.filters=[new qe(0)],B.x=T.pos.x-2,B.y=T.pos.y-2,o[a]=new ze(_.renderer.generateTexture(y))}return o[a]}async function I(){n(4,u=void 0),await Qt();let y=new Xt(_.renderer).base64(_.stage,"image/jpeg"),W=document.createElement("a");W.download="output.jpg",W.href=y,W.click()}function h(T,y){l.$$.not_equal(s[y],T)&&(s[y]=T,n(2,s))}function E(T){_=T,n(1,_)}const g=T=>{n(0,a=T),n(4,u=void 0)},d=(T,y)=>n(4,u=T.layers.length-y-1);function z(T){l.$$.not_equal(i[a].layers[u].pos.x,T)&&(i[a].layers[u].pos.x=T,n(3,i))}function b(T){l.$$.not_equal(i[a].layers[u].pos.y,T)&&(i[a].layers[u].pos.y=T,n(3,i))}function L(T){l.$$.not_equal(i[a].layers[u].rect.width,T)&&(i[a].layers[u].rect.width=T,n(3,i))}function F(T){l.$$.not_equal(i[a].layers[u].rect.height,T)&&(i[a].layers[u].rect.height=T,n(3,i))}function K(T){l.$$.not_equal(i[a],T)&&(i[a]=T,n(3,i))}function Z(T){u=T,n(4,u)}function w(T){a=T,n(0,a)}function q(){r.lang=Jt(this),ke.set(r)}return l.$$.update=()=>{l.$$.dirty[0]&3&&n(5,t=_&&a!==void 0?c():null)},[a,_,s,i,u,t,r,f,I,h,E,g,d,z,b,L,F,K,Z,w,q]}class Hl extends he{constructor(e){super(),pe(this,e,Yl,jl,_e,{},null,[-1,-1])}}It.SCALE_MODE=ve.LINEAR;It.MIPMAP_TEXTURES=Zt.ON;new Hl({target:document.body});window.PIXI=Gt;
