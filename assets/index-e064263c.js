(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const f of r.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerpolicy&&(r.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?r.credentials="include":l.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(l){if(l.ep)return;l.ep=!0;const r=n(l);fetch(l.href,r)}})();function G(){}function Ve(e){return e()}function Ce(){return Object.create(null)}function U(e){e.forEach(Ve)}function Me(e){return typeof e=="function"}function we(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let re;function ae(e,t){return re||(re=document.createElement("a")),re.href=t,e===re.href}function Pe(e){return Object.keys(e).length===0}function y(e,t){e.appendChild(t)}function P(e,t,n){e.insertBefore(t,n||null)}function H(e){e.parentNode&&e.parentNode.removeChild(e)}function Oe(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function E(e){return document.createElement(e)}function se(e){return document.createTextNode(e)}function W(){return se(" ")}function Xe(){return se("")}function M(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function _(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ze(e){return Array.from(e.childNodes)}function be(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Ee(e,t){e.value=t??""}function S(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function z(e,t,n){e.classList[n?"add":"remove"](t)}let le;function oe(e){le=e}function Fe(){if(!le)throw new Error("Function called outside component initialization");return le}function qe(e){Fe().$$.on_mount.push(e)}function De(e){Fe().$$.on_destroy.push(e)}const te=[],Z=[],fe=[],ce=[],Ke=Promise.resolve();let pe=!1;function Ge(){pe||(pe=!0,Ke.then(We))}function _e(e){fe.push(e)}function ne(e){ce.push(e)}const he=new Set;let ee=0;function We(){if(ee!==0)return;const e=le;do{try{for(;ee<te.length;){const t=te[ee];ee++,oe(t),Ue(t.$$)}}catch(t){throw te.length=0,ee=0,t}for(oe(null),te.length=0,ee=0;Z.length;)Z.pop()();for(let t=0;t<fe.length;t+=1){const n=fe[t];he.has(n)||(he.add(n),n())}fe.length=0}while(te.length);for(;ce.length;)ce.pop()();pe=!1,he.clear(),oe(e)}function Ue(e){if(e.fragment!==null){e.update(),U(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(_e)}}const ue=new Set;let x;function de(){x={r:0,c:[],p:x}}function ge(){x.r||U(x.c),x=x.p}function O(e,t){e&&e.i&&(ue.delete(e),e.i(t))}function D(e,t,n,i){if(e&&e.o){if(ue.has(e))return;ue.add(e),x.c.push(()=>{ue.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function Te(e,t){e.d(1),t.delete(e.key)}function je(e,t,n,i,l,r,f,m,o,s,u,c){let d=e.length,I=r.length,A=d;const N={};for(;A--;)N[e[A].key]=A;const C=[],Q=new Map,V=new Map;for(A=I;A--;){const b=c(l,r,A),B=n(b);let a=f.get(B);a?i&&a.p(b,t):(a=s(B,b),a.c()),Q.set(B,C[A]=a),B in N&&V.set(B,Math.abs(A-N[B]))}const w=new Set,g=new Set;function v(b){O(b,1),b.m(m,u),f.set(b.key,b),u=b.first,I--}for(;d&&I;){const b=C[I-1],B=e[d-1],a=b.key,k=B.key;b===B?(u=b.first,d--,I--):Q.has(k)?!f.has(a)||w.has(a)?v(b):g.has(k)?d--:V.get(a)>V.get(k)?(g.add(a),v(b)):(w.add(k),d--):(o(B,f),d--)}for(;d--;){const b=e[d];Q.has(b.key)||o(b,f)}for(;I;)v(C[I-1]);return C}function ie(e,t,n){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function He(e){e&&e.c()}function ye(e,t,n,i){const{fragment:l,after_update:r}=e.$$;l&&l.m(t,n),i||_e(()=>{const f=e.$$.on_mount.map(Ve).filter(Me);e.$$.on_destroy?e.$$.on_destroy.push(...f):U(f),e.$$.on_mount=[]}),r.forEach(_e)}function Ae(e,t){const n=e.$$;n.fragment!==null&&(U(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ye(e,t){e.$$.dirty[0]===-1&&(te.push(e),Ge(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ve(e,t,n,i,l,r,f,m=[-1]){const o=le;oe(e);const s=e.$$={fragment:null,ctx:[],props:r,update:G,not_equal:l,bound:Ce(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(o?o.$$.context:[])),callbacks:Ce(),dirty:m,skip_bound:!1,root:t.target||o.$$.root};f&&f(s.root);let u=!1;if(s.ctx=n?n(e,t.props||{},(c,d,...I)=>{const A=I.length?I[0]:d;return s.ctx&&l(s.ctx[c],s.ctx[c]=A)&&(!s.skip_bound&&s.bound[c]&&s.bound[c](A),u&&Ye(e,c)),d}):[],s.update(),u=!0,U(s.before_update),s.fragment=i?i(s.ctx):!1,t.target){if(t.hydrate){const c=Ze(t.target);s.fragment&&s.fragment.l(c),c.forEach(H)}else s.fragment&&s.fragment.c();t.intro&&O(e.$$.fragment),ye(e,t.target,t.anchor,t.customElement),We()}oe(o)}class ke{$destroy(){Ae(this,1),this.$destroy=G}$on(t,n){if(!Me(n))return G;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const l=i.indexOf(n);l!==-1&&i.splice(l,1)}}$set(t){this.$$set&&!Pe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function xe(e){let t,n,i,l,r,f,m,o,s,u,c,d,I,A,N,C,Q,V,w,g,v,b,B;return{c(){t=E("div"),n=E("div"),i=E("div"),l=W(),r=E("div"),f=W(),m=E("div"),o=W(),s=E("div"),u=E("div"),c=W(),d=E("div"),I=W(),A=E("div"),N=W(),C=E("div"),Q=E("div"),V=W(),w=E("div"),g=W(),v=E("div"),_(i,"class","resizer h-[6px] w-[6px] rounded-sm border-2 svelte-19ac299"),z(i,"cursor-nw-resize",!e[4]),z(i,"dragging",e[4]&&e[5]===e[15]),_(r,"class","resizer h-[6px] border-b-2 border-dashed svelte-19ac299"),S(r,"width",e[2]+"px"),z(r,"cursor-n-resize",!e[4]),z(r,"dragging",e[4]&&e[5]===e[13]),_(m,"class","resizer h-[6px] w-[6px] rounded-sm border-2 svelte-19ac299"),z(m,"cursor-ne-resize",!e[4]),z(m,"dragging",e[4]&&e[5]===e[16]),_(n,"class","flex flex-row"),_(u,"class","resizer w-[6px] border-r-2 border-dashed svelte-19ac299"),S(u,"height",e[3]+"px"),z(u,"cursor-w-resize",!e[4]),z(u,"dragging",e[4]&&e[5]===e[12]),_(d,"class","cursor-move"),S(d,"width",e[2]+"px"),S(d,"height",e[3]+"px"),_(A,"class","resizer w-[6px] border-l-2 border-dashed svelte-19ac299"),S(A,"height",e[3]+"px"),z(A,"cursor-e-resize",!e[4]),z(A,"dragging",e[4]&&e[5]===e[10]),_(s,"class","flex flex-row"),_(Q,"class","resizer h-[6px] w-[6px] rounded-sm border-2 svelte-19ac299"),z(Q,"cursor-sw-resize",!e[4]),z(Q,"dragging",e[4]&&e[5]===e[17]),_(w,"class","resizer h-[6px] border-t-2 border-dashed svelte-19ac299"),S(w,"width",e[2]+"px"),z(w,"cursor-s-resize",!e[4]),z(w,"dragging",e[4]&&e[5]===e[11]),_(v,"class","resizer h-[6px] w-[6px] rounded-sm border-2 svelte-19ac299"),z(v,"cursor-se-resize",!e[4]),z(v,"dragging",e[4]&&e[5]===e[14]),_(C,"class","flex flex-row"),_(t,"class","this svelte-19ac299"),S(t,"left",e[0]-6+"px"),S(t,"top",e[1]-6+"px"),S(t,"width",e[2]+12+"px"),S(t,"height",e[3]+12+"px"),z(t,"dragging",!!e[4])},m(a,k){P(a,t,k),y(t,n),y(n,i),y(n,l),y(n,r),y(n,f),y(n,m),y(t,o),y(t,s),y(s,u),y(s,c),y(s,d),y(s,I),y(s,A),y(t,N),y(t,C),y(C,Q),y(C,V),y(C,w),y(C,g),y(C,v),b||(B=[M(window,"mouseup",e[19]),M(window,"mousemove",e[8]),M(i,"mousedown",e[20]),M(r,"mousedown",e[21]),M(m,"mousedown",e[22]),M(u,"mousedown",e[23]),M(d,"mousedown",e[24]),M(A,"mousedown",e[25]),M(Q,"mousedown",e[26]),M(w,"mousedown",e[27]),M(v,"mousedown",e[28])],b=!0)},p(a,[k]){k&16&&z(i,"cursor-nw-resize",!a[4]),k&32816&&z(i,"dragging",a[4]&&a[5]===a[15]),k&4&&S(r,"width",a[2]+"px"),k&16&&z(r,"cursor-n-resize",!a[4]),k&8240&&z(r,"dragging",a[4]&&a[5]===a[13]),k&16&&z(m,"cursor-ne-resize",!a[4]),k&65584&&z(m,"dragging",a[4]&&a[5]===a[16]),k&8&&S(u,"height",a[3]+"px"),k&16&&z(u,"cursor-w-resize",!a[4]),k&4144&&z(u,"dragging",a[4]&&a[5]===a[12]),k&4&&S(d,"width",a[2]+"px"),k&8&&S(d,"height",a[3]+"px"),k&8&&S(A,"height",a[3]+"px"),k&16&&z(A,"cursor-e-resize",!a[4]),k&1072&&z(A,"dragging",a[4]&&a[5]===a[10]),k&16&&z(Q,"cursor-sw-resize",!a[4]),k&131120&&z(Q,"dragging",a[4]&&a[5]===a[17]),k&4&&S(w,"width",a[2]+"px"),k&16&&z(w,"cursor-s-resize",!a[4]),k&2096&&z(w,"dragging",a[4]&&a[5]===a[11]),k&16&&z(v,"cursor-se-resize",!a[4]),k&16432&&z(v,"dragging",a[4]&&a[5]===a[14]),k&1&&S(t,"left",a[0]-6+"px"),k&2&&S(t,"top",a[1]-6+"px"),k&4&&S(t,"width",a[2]+12+"px"),k&8&&S(t,"height",a[3]+12+"px"),k&16&&z(t,"dragging",!!a[4])},i:G,o:G,d(a){a&&H(t),b=!1,U(B)}}}function $e(e,t,n){let{x:i}=t,{y:l}=t,{width:r}=t,{height:f}=t,{ratio:m=r/f}=t,o,s=()=>{},u="";function c(p,J,j){p.preventDefault(),n(4,o=p.target),n(5,s=J),n(6,u=j),document.body.classList.add(j)}function d(p){o&&s({x:p.clientX,y:p.clientY})}function I(p){p.preventDefault(),n(4,o=p.target);let J=p.offsetX,j=p.offsetY;n(5,s=T=>{let X=o.getBoundingClientRect(),K=T.x-(X.x+J),Y=T.y-(X.y+j);n(0,i+=K),n(1,l+=Y)})}function A(p,J=!1){let j=o.getBoundingClientRect(),T=p.x-(j.x+1+j.width/2),X=Math.max(r+(J?-T:T),0),K=Math.max(X/m,0),Y=(K-f)/2;n(2,r=X),n(3,f=K),n(1,l-=Y)}function N(p,J=!1){let j=o.getBoundingClientRect(),T=p.y-(j.y+j.height/2),X=Math.max(f+(J?-T:T),0),K=Math.max(X*m,0),Y=(K-r)/2;n(2,r=K),n(3,f=X),n(0,i-=Y)}function C(p){let J=r;A(p,!0),n(0,i-=r-J)}function Q(p){let J=f;N(p,!0),n(1,l-=f-J)}function V(p,J={}){let j=o.getBoundingClientRect(),T=(p.x-(j.x+j.width/2))*(J.x?-1:1),X=(p.y-(j.y+j.height/2))*(J.y?-1:1),K=Math.abs(T)<Math.abs(X)?T:X,Y=Math.min(Math.abs(T)/Math.max(r,1),Math.abs(X)/Math.max(f,1)),Ie=Math.max(r+Math.max(r,1)*Y*(K<0?-1:1),0);n(3,f=Math.max(Ie/m,0)),n(2,r=Ie)}function w(p){let J={width:r,height:f};V(p,{x:!0,y:!0}),n(0,i-=r-J.width),n(1,l-=f-J.height)}function g(p){let J=f;V(p,{y:!0}),n(1,l-=f-J)}function v(p){let J=r;V(p,{x:!0}),n(0,i-=r-J)}const b=()=>{n(4,o=void 0),u.length&&document.body.classList.remove(u)},B=p=>c(p,w,"cursor-nw-resize"),a=p=>c(p,Q,"cursor-n-resize"),k=p=>c(p,g,"cursor-ne-resize"),F=p=>c(p,C,"cursor-w-resize"),h=p=>I(p),L=p=>c(p,A,"cursor-e-resize"),R=p=>c(p,v,"cursor-sw-resize"),q=p=>c(p,N,"cursor-s-resize"),$=p=>c(p,V,"cursor-se-resize");return e.$$set=p=>{"x"in p&&n(0,i=p.x),"y"in p&&n(1,l=p.y),"width"in p&&n(2,r=p.width),"height"in p&&n(3,f=p.height),"ratio"in p&&n(18,m=p.ratio)},[i,l,r,f,o,s,u,c,d,I,A,N,C,Q,V,w,g,v,m,b,B,a,k,F,h,L,R,q,$]}class et extends ke{constructor(t){super(),ve(this,t,$e,xe,we,{x:0,y:1,width:2,height:3,ratio:18})}}const tt="/assets/template-2b5fa4d7.jpg",nt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHAAAAChCAYAAAAfgjvBAAABbWlDQ1BpY2MAACiRdZE5SwNRFIW/REVxi6CFqEWKKBYRREEsJYI20SKJ4NZkJpuQZZiZIMFWsLEIWIg2boX/QFvBVkEQFEHEzt6tERnvywgRSd7w5n6c987lzhnwhrN6zmqcglzeNiOzIf/i0rK/+QUvXXQSpD+uW8ZcdCZG3fV5h0fV2xHVq/69mqstkbR08LQIT+iGaQvLNITXbUPxtnCPnoknhA+Fg6YMKHyldM3lZ8Vpl98Vm7HINHhVT3/6D2t/WM+YOeFh4UAuW9R/51Ff0p7ML0Sl9skewCLCLCH8aBRZI4vNiNS8ZFbbN1rxzVMQjy5vgxKmONJkxBsUtShdk1JToiflyVJSuf/P00qNj7nd20PQ9OQ4b4PQvAPfZcf5OnKc72NoeISLfNVfkJwmP0QvV7XAAfg24eyyqmm7cL4FvQ9G3IxXpAbZ3lQKXk+hYwm6b6B1xc3q95yTe4htyC+6hr19GJL7vtUfLo1oH2mzNKwAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAOASURBVHja7dyxixR3GMbxG1GCQQhCUgQrI5gU0QsWGivxbHLaCMHCItiJRSpT5QIiCFoEjP4V1jZJZdKaVDFpRPAg1RXR4irBCJtnwkomQ3Q3UXTenc8XHl72lmveL+/8dvbd3WZpTiaTyVspq8lKspy8l7R/27aEF+GPZDNZT+4k3yffNU2zOc8/N3OI25OylpxOtuv3K+FRciO5HJH3/5fAiGtlXUzOJ1v19LXwJLnaeojIR3MLjLz28ngz+VAPB8GvyclIXJ8pMPL2p9xK3ta3QfEgORaJvzxT4HTyfiRv0BIPdSex6Z15P7lslricHnp6Jm7pPHGRvBLsm7r6ewKntwp3vdos9er0/fZS+nQC18grRevqq78mcPoOy4ab9JI3+++2E7hKXklaZ5+0Alf0oiwrrcBlfSjLcnsG/u7Gve6NfSvw8ZKVUFUetwIn+lCXLVpAIAgEgQSCQBAIAgkEgSAQBBIIAkEgCCQQBIJAEEggCASBIJBAEAgCCQSBIBAEEggCQSAIJBAEgkAQSCAIBIEgkEAQCAJBIIEgEASCQAJBIAgkEASCQBBIIAgEgSCQQBAIAkEggSAQBIJAAkEgCASBBIJAEAgCCQSBIJBAEAgCQSCBIBAEgkACQSAIBIEEgkAQCAIJBIF4uQJPJPe0oqjApmm+Td2XnE82taQWTffBZDJ5J+VScrb/HAoI7Ij8KOVackSLCr6IyWX155SjyankN20qNoG9adw+PR/Xkje1rJjAjshdKVeSz7StoMCOyI9TricHta/gjXzOx9sph5MzyYYWFpvA3jTuSPky+SJ5QzuLCeyI3J3ydfKplhYU2BF5dHr/uF9rB3oGzjgff0g5kJxLHmpvsQnsTePOlAvJ58lWrS4msCPyg5Sryap2FxTYEXk85Ztkr7YP9AyccT5aW1WewN40WltVFtgRaW1V5RL6jMuqtVXlCexNo7VVZYEdkdZWlQV2RFpbDf0MnHE+WltVnsDeNFpbVRbYEWltVVlgR6S11dDPwBnno7VV5QnsTeOo11YL8z7kWNdWC/dG8tjWVgv3/cCxra0WepUzhrXVKHZxi7y2GsVXrBd5bTW6bfiira1G+3GGRVlbjf7zKNXXVqP/mZHqayufCPvnNJZbWxH47yLLrK0IfL7Iwa+t/NTW88/Hwa+tTOD80zjItRWB/13koNZWfwJenOnvGfoRnwAAAABJRU5ErkJggg==";function ze(e,t,n){const i=e.slice();return i[17]=t[n],i[19]=n,i}function it(e){let t,n=e[0].name+"",i,l,r,f,m;return{c(){t=E("div"),i=se(n),l=W(),r=E("input"),_(t,"class","py-2 pl-4"),_(r,"class","w-0 flex-grow bg-transparent py-2 pr-4 font-normal text-slate-200 underline-offset-4 placeholder:text-slate-200 placeholder:underline focus:outline-none"),_(r,"placeholder","　　　　　　　　　　　　　　　　　　　　　　　　")},m(o,s){P(o,t,s),y(t,i),P(o,l,s),P(o,r,s),Ee(r,e[0].dynamic),f||(m=M(r,"input",e[8]),f=!0)},p(o,s){s&1&&n!==(n=o[0].name+"")&&be(i,n),s&1&&r.value!==o[0].dynamic&&Ee(r,o[0].dynamic)},d(o){o&&H(t),o&&H(l),o&&H(r),f=!1,m()}}}function st(e){let t,n=e[0].name+"",i;return{c(){t=E("div"),i=se(n),_(t,"class","px-4 py-2")},m(l,r){P(l,t,r),y(t,i)},p(l,r){r&1&&n!==(n=l[0].name+"")&&be(i,n)},d(l){l&&H(t)}}}function Be(e,t){let n,i,l,r,f,m,o,s=t[17].name+"",u,c,d,I,A;function N(...w){return t[11](t[19],...w)}function C(){return t[13](t[17],t[19])}function Q(){return t[14](t[19])}function V(...w){return t[15](t[19],...w)}return{key:e,first:null,c(){n=E("div"),i=E("div"),l=E("img"),m=W(),o=E("div"),u=se(s),c=W(),d=E("button"),d.textContent="－",_(l,"draggable","false"),_(l,"alt",r=t[17].name),ae(l.src,f=t[17].image.src)||_(l,"src",f),_(l,"class","h-10 w-10 object-cover"),_(o,"class","w-0 flex-grow"),_(i,"class","flex w-0 flex-grow items-center gap-4 overflow-hidden"),_(i,"draggable","true"),_(d,"class","h-10 w-10 bg-slate-500 font-bold text-white"),_(n,"class","flex select-none flex-row items-center gap-4"),z(n,"bg-slate-300",t[1]===t[19]),this.first=n},m(w,g){P(w,n,g),y(n,i),y(i,l),y(i,m),y(i,o),y(o,u),y(n,c),y(n,d),I||(A=[M(i,"dragstart",N),M(i,"dragend",t[12]),M(d,"click",C),M(n,"mousedown",Q),M(n,"dragover",V)],I=!0)},p(w,g){t=w,g&1&&r!==(r=t[17].name)&&_(l,"alt",r),g&1&&!ae(l.src,f=t[17].image.src)&&_(l,"src",f),g&1&&s!==(s=t[17].name+"")&&be(u,s),g&3&&z(n,"bg-slate-300",t[1]===t[19])},d(w){w&&H(n),I=!1,U(A)}}}function ot(e){let t,n,i,l,r,f,m,o=[],s=new Map,u,c,d,I;function A(w,g){return w[0].dynamic===void 0?st:it}let N=A(e),C=N(e),Q=e[0].images;const V=w=>w[17].image;for(let w=0;w<Q.length;w+=1){let g=ze(e,Q,w),v=V(g);s.set(v,o[w]=Be(v,g))}return{c(){t=E("div"),n=E("div"),C.c(),i=W(),l=E("div"),r=E("form"),f=E("input"),m=W();for(let w=0;w<o.length;w+=1)o[w].c();u=W(),c=E("button"),c.textContent="添加圖片",_(n,"class","flex flex-row items-center bg-slate-600 text-xl font-bold text-white"),_(f,"type","file"),_(f,"accept",".jpg,.jpeg,.png,.bmp"),_(r,"class","hidden"),_(c,"class","block p-0.5 hover:bg-gray-300 active:bg-gray-200"),_(l,"class","flex h-0 flex-grow flex-col gap-2 p-4"),_(t,"class","flex h-full w-full flex-col bg-gray-100")},m(w,g){P(w,t,g),y(t,n),C.m(n,null),y(t,i),y(t,l),y(l,r),y(r,f),e[9](f),e[10](r),y(l,m);for(let v=0;v<o.length;v+=1)o[v].m(l,null);y(l,u),y(l,c),d||(I=[M(f,"change",e[5]),M(c,"click",e[16])],d=!0)},p(w,[g]){N===(N=A(w))&&C?C.p(w,g):(C.d(1),C=N(w),C&&(C.c(),C.m(n,null))),g&211&&(Q=w[0].images,o=je(o,g,V,1,w,Q,s,l,Te,Be,u,ze))},i:G,o:G,d(w){w&&H(t),C.d(),e[9](null),e[10](null);for(let g=0;g<o.length;g+=1)o[g].d();d=!1,U(I)}}}function lt(e,t,n){let{slot:i}=t,{selectedImage:l}=t,r,f;function m(){let g=r.files[0],v=new FileReader;v.onload=()=>{let b=new Image;b.onload=()=>{let B={width:b.width,height:b.height};if(b.width>b.height){if(b.width>512){let k=b.width/512;B.width/=k,B.height/=k}}else if(b.height>512){let k=b.height/512;B.width/=k,B.height/=k}let a={name:g.name,image:b,width:b.width,height:b.height,position:{x:56-B.width/2,y:80-B.height/2,...B}};n(1,l=i.images.length),n(0,i.images=[...i.images,a],i)},b.src=v.result},v.readAsDataURL(g),f.reset()}let o=!1;function s(g,v){n(4,o=v);let b=g.target.parentElement;g.dataTransfer.dropEffect="move",g.dataTransfer.effectAllowed="move",g.dataTransfer.setData("text/plain",i.images[v].name),g.dataTransfer.setDragImage(b,b.clientWidth/2,b.clientHeight/2)}function u(g,v){if(o===!1)return;g.preventDefault();let b=i.images[o],B=i.images[v];n(0,i.images[v]=b,i),n(0,i.images[o]=B,i),n(4,o=v),g.dataTransfer.dropEffect="move",n(1,l=v)}function c(){i.dynamic=this.value,n(0,i)}function d(g){Z[g?"unshift":"push"](()=>{r=g,n(2,r)})}function I(g){Z[g?"unshift":"push"](()=>{f=g,n(3,f)})}const A=(g,v)=>s(v,g),N=()=>n(4,o=!1),C=(g,v)=>{n(0,i.images=i.images.filter(b=>b!==g),i),n(1,l=l>v?l-1:l<v?l:void 0)},Q=g=>n(1,l=g),V=(g,v)=>u(v,g),w=()=>r.click();return e.$$set=g=>{"slot"in g&&n(0,i=g.slot),"selectedImage"in g&&n(1,l=g.selectedImage)},[i,l,r,f,o,m,s,u,c,d,I,A,N,C,Q,V,w]}class rt extends ke{constructor(t){super(),ve(this,t,lt,ot,we,{slot:0,selectedImage:1})}}function Se(e,t,n){const i=e.slice();return i[24]=t[n],i[26]=n,i}function Qe(e,t,n){const i=e.slice();return i[27]=t[n],i[26]=n,i}function ft(e){let t=[],n=new Map,i,l,r,f=e[24].images;const m=s=>s[27].image;for(let s=0;s<f.length;s+=1){let u=Qe(e,f,s),c=m(u);n.set(c,t[s]=Re(c,u))}let o=e[6]!==void 0&&Le(e);return{c(){for(let s=0;s<t.length;s+=1)t[s].c();i=W(),o&&o.c(),l=Xe()},m(s,u){for(let c=0;c<t.length;c+=1)t[c].m(s,u);P(s,i,u),o&&o.m(s,u),P(s,l,u),r=!0},p(s,u){u&65&&(f=s[24].images,t=je(t,u,m,1,s,f,n,i.parentNode,Te,Re,i,Qe)),s[6]!==void 0?o?(o.p(s,u),u&64&&O(o,1)):(o=Le(s),o.c(),O(o,1),o.m(l.parentNode,l)):o&&(de(),D(o,1,1,()=>{o=null}),ge())},i(s){r||(O(o),r=!0)},o(s){D(o),r=!1},d(s){for(let u=0;u<t.length;u+=1)t[u].d(s);s&&H(i),o&&o.d(s),s&&H(l)}}}function ut(e){let t,n,i;function l(){return e[13](e[26])}return{c(){t=E("button"),_(t,"class","block h-full w-full")},m(r,f){P(r,t,f),n||(i=M(t,"click",l),n=!0)},p(r,f){e=r},i:G,o:G,d(r){r&&H(t),n=!1,i()}}}function Re(e,t){let n,i,l;function r(){return t[14](t[26])}return{key:e,first:null,c(){n=E("div"),_(n,"class","absolute z-10"),S(n,"top",t[27].position.y+"px"),S(n,"left",t[27].position.x+"px"),S(n,"width",t[27].position.width+"px"),S(n,"height",t[27].position.height+"px"),this.first=n},m(f,m){P(f,n,m),i||(l=M(n,"mousedown",r),i=!0)},p(f,m){t=f,m&1&&S(n,"top",t[27].position.y+"px"),m&1&&S(n,"left",t[27].position.x+"px"),m&1&&S(n,"width",t[27].position.width+"px"),m&1&&S(n,"height",t[27].position.height+"px")},d(f){f&&H(n),i=!1,l()}}}function Le(e){let t,n,i,l,r,f;function m(d){e[15](d)}function o(d){e[16](d)}function s(d){e[17](d)}function u(d){e[18](d)}let c={ratio:e[0][e[5]].images[e[6]].width/e[0][e[5]].images[e[6]].height};return e[0][e[5]].images[e[6]].position.x!==void 0&&(c.x=e[0][e[5]].images[e[6]].position.x),e[0][e[5]].images[e[6]].position.y!==void 0&&(c.y=e[0][e[5]].images[e[6]].position.y),e[0][e[5]].images[e[6]].position.width!==void 0&&(c.width=e[0][e[5]].images[e[6]].position.width),e[0][e[5]].images[e[6]].position.height!==void 0&&(c.height=e[0][e[5]].images[e[6]].position.height),t=new et({props:c}),Z.push(()=>ie(t,"x",m)),Z.push(()=>ie(t,"y",o)),Z.push(()=>ie(t,"width",s)),Z.push(()=>ie(t,"height",u)),{c(){He(t.$$.fragment)},m(d,I){ye(t,d,I),f=!0},p(d,I){const A={};I&97&&(A.ratio=d[0][d[5]].images[d[6]].width/d[0][d[5]].images[d[6]].height),!n&&I&97&&(n=!0,A.x=d[0][d[5]].images[d[6]].position.x,ne(()=>n=!1)),!i&&I&97&&(i=!0,A.y=d[0][d[5]].images[d[6]].position.y,ne(()=>i=!1)),!l&&I&97&&(l=!0,A.width=d[0][d[5]].images[d[6]].position.width,ne(()=>l=!1)),!r&&I&97&&(r=!0,A.height=d[0][d[5]].images[d[6]].position.height,ne(()=>r=!1)),t.$set(A)},i(d){f||(O(t.$$.fragment,d),f=!0)},o(d){D(t.$$.fragment,d),f=!1},d(d){Ae(t,d)}}}function Je(e){let t,n,i,l,r;const f=[ut,ft],m=[];function o(s,u){return s[5]!==s[26]?0:1}return n=o(e),i=m[n]=f[n](e),{c(){t=E("div"),i.c(),l=W(),_(t,"class","slot svelte-hfm2qf"),S(t,"left",e[24].position.x+"px"),S(t,"top",e[24].position.y+"px"),z(t,"outline",e[5]===e[26])},m(s,u){P(s,t,u),m[n].m(t,null),y(t,l),r=!0},p(s,u){let c=n;n=o(s),n===c?m[n].p(s,u):(de(),D(m[c],1,1,()=>{m[c]=null}),ge(),i=m[n],i?i.p(s,u):(i=m[n]=f[n](s),i.c()),O(i,1),i.m(t,l)),(!r||u&1)&&S(t,"left",s[24].position.x+"px"),(!r||u&1)&&S(t,"top",s[24].position.y+"px"),(!r||u&32)&&z(t,"outline",s[5]===s[26])},i(s){r||(O(i),r=!0)},o(s){D(i),r=!1},d(s){s&&H(t),m[n].d()}}}function Ne(e){let t,n,i,l;function r(o){e[19](o)}function f(o){e[20](o)}let m={};return e[0][e[5]]!==void 0&&(m.slot=e[0][e[5]]),e[6]!==void 0&&(m.selectedImage=e[6]),t=new rt({props:m}),Z.push(()=>ie(t,"slot",r)),Z.push(()=>ie(t,"selectedImage",f)),{c(){He(t.$$.fragment)},m(o,s){ye(t,o,s),l=!0},p(o,s){const u={};!n&&s&33&&(n=!0,u.slot=o[0][o[5]],ne(()=>n=!1)),!i&&s&64&&(i=!0,u.selectedImage=o[6],ne(()=>i=!1)),t.$set(u)},i(o){l||(O(t.$$.fragment,o),l=!0)},o(o){D(t.$$.fragment,o),l=!1},d(o){Ae(t,o)}}}function at(e){let t,n,i,l,r,f,m,o,s,u,c,d,I,A,N,C,Q,V,w,g,v,b,B=e[0],a=[];for(let h=0;h<B.length;h+=1)a[h]=Je(Se(e,B,h));const k=h=>D(a[h],1,1,()=>{a[h]=null});let F=e[5]!==void 0&&Ne(e);return{c(){t=E("img"),i=W(),l=E("img"),f=W(),m=E("div"),o=E("div"),s=E("div"),u=E("canvas"),c=W();for(let h=0;h<a.length;h+=1)a[h].c();d=W(),I=E("div"),A=E("div"),F&&F.c(),N=W(),C=E("a"),Q=se("保存"),V=W(),w=E("div"),w.innerHTML='Credit: <a class="text-blue-700" target="_blank" rel="noreferrer" href="https://twitter.com/EastAiruier/status/1624174786359496704">@EastAiruier</a>',_(t,"class","hidden"),ae(t.src,n=tt)||_(t,"src",n),_(t,"alt",""),_(l,"class","hidden"),ae(l.src,r=nt)||_(l,"src",r),_(l,"alt",""),_(u,"class","absolute"),_(u,"width","680"),_(u,"height","680"),_(s,"class","template select-none svelte-hfm2qf"),_(A,"class","h-0 flex-grow"),_(C,"href",e[4]),_(C,"download","output.jpg"),_(C,"target","_blank"),_(C,"rel","noreferrer"),_(C,"class","bg-slate-400 p-2 text-center text-lg font-bold text-white"),_(I,"class","flex w-80 flex-col overflow-auto bg-white"),_(o,"class","flex flex-row shadow-lg"),_(m,"class","flex h-screen w-screen flex-col items-center justify-center gap-4")},m(h,L){P(h,t,L),e[9](t),P(h,i,L),P(h,l,L),e[11](l),P(h,f,L),P(h,m,L),y(m,o),y(o,s),y(s,u),e[12](u),y(s,c);for(let R=0;R<a.length;R+=1)a[R].m(s,null);y(o,d),y(o,I),y(I,A),F&&F.m(A,null),y(I,N),y(I,C),y(C,Q),y(m,V),y(m,w),g=!0,v||(b=[M(t,"load",e[8]),M(l,"load",e[10])],v=!0)},p(h,[L]){if(L&97){B=h[0];let R;for(R=0;R<B.length;R+=1){const q=Se(h,B,R);a[R]?(a[R].p(q,L),O(a[R],1)):(a[R]=Je(q),a[R].c(),O(a[R],1),a[R].m(s,null))}for(de(),R=B.length;R<a.length;R+=1)k(R);ge()}h[5]!==void 0?F?(F.p(h,L),L&32&&O(F,1)):(F=Ne(h),F.c(),O(F,1),F.m(A,null)):F&&(de(),D(F,1,1,()=>{F=null}),ge()),(!g||L&16)&&_(C,"href",h[4])},i(h){if(!g){for(let L=0;L<B.length;L+=1)O(a[L]);O(F),g=!0}},o(h){a=a.filter(Boolean);for(let L=0;L<a.length;L+=1)D(a[L]);D(F),g=!1},d(h){h&&H(t),e[9](null),h&&H(i),h&&H(l),e[11](null),h&&H(f),h&&H(m),e[12](null),Oe(a,h),F&&F.d(),v=!1,U(b)}}}function me(){return new Promise(e=>setTimeout(e))}function dt(e,t,n){let i,l,r,f,m=!0,o=[{name:"第一個看的",position:{x:49,y:49},images:[]},{name:"最常看的",position:{x:167,y:49},images:[]},{name:"最佳節目",position:{x:284,y:49},images:[]},{name:"最瘋狂的",position:{x:402,y:49},images:[]},{name:"最療愈的",position:{x:520,y:49},images:[]},{name:"聲音最好聽的",position:{x:49,y:249},images:[]},{name:"唱歌最好聽的",position:{x:167,y:249},images:[]},{name:"最喜歡的",position:{x:284,y:249},images:[]},{name:"影響最深遠的",position:{x:402,y:249},images:[]},{name:"最漂亮的",position:{x:520,y:249},images:[]},{name:"最想犯罪的",position:{x:49,y:449},images:[]},{name:"最帥的",position:{x:167,y:449},images:[]},{name:"最想推廣的",position:{x:284,y:449},images:[]},{name:"最婆的",position:{x:402,y:449},images:[]},{name:"最",position:{x:520,y:449},dynamic:"",images:[]}],s,u,c=!1;async function d(h){c=!0,m=!1;let L=document.createElement("canvas");L.width=r.width,L.height=r.height;let R=L.getContext("2d");R.drawImage(i,0,0);for(let q of h){if(q.dynamic!==void 0){R.textAlign="left",R.textBaseline="alphabetic",R.fillStyle="black",R.font='14px "Noto Sans TC", "Noto Sans SC", "Noto Sans JP", sans-serif';let T=q.position.x+32,X=q.position.y+184;R.fillText(q.dynamic,T,X)}let $=document.createElement("canvas");$.width=l.width,$.height=l.height;let p=$.getContext("2d");for(let T of q.images)p.drawImage(T.image,T.position.x,T.position.y,T.position.width,T.position.height),await me();let J=document.createElement("canvas");J.width=l.width,J.height=l.height;let j=J.getContext("2d");j.drawImage(l,0,0),await me(),j.globalCompositeOperation="source-in",j.drawImage($,0,0),R.drawImage(J,q.position.x,q.position.y),await me()}r.getContext("2d").drawImage(L,0,0),n(4,f=r.toDataURL("image/jpeg")),c=!1}let I;qe(()=>{I=setInterval(()=>{m&&!c&&d(o)},50)}),De(()=>{clearInterval(I)});const A=()=>d(o);function N(h){Z[h?"unshift":"push"](()=>{i=h,n(1,i)})}const C=()=>d(o);function Q(h){Z[h?"unshift":"push"](()=>{l=h,n(2,l)})}function V(h){Z[h?"unshift":"push"](()=>{r=h,n(3,r)})}const w=h=>{n(5,s=h),n(6,u=void 0)},g=h=>n(6,u=h);function v(h){e.$$.not_equal(o[s].images[u].position.x,h)&&(o[s].images[u].position.x=h,n(0,o))}function b(h){e.$$.not_equal(o[s].images[u].position.y,h)&&(o[s].images[u].position.y=h,n(0,o))}function B(h){e.$$.not_equal(o[s].images[u].position.width,h)&&(o[s].images[u].position.width=h,n(0,o))}function a(h){e.$$.not_equal(o[s].images[u].position.height,h)&&(o[s].images[u].position.height=h,n(0,o))}function k(h){e.$$.not_equal(o[s],h)&&(o[s]=h,n(0,o))}function F(h){u=h,n(6,u)}return e.$$.update=()=>{e.$$.dirty&1&&o&&(m=!0)},[o,i,l,r,f,s,u,d,A,N,C,Q,V,w,g,v,b,B,a,k,F]}class gt extends ke{constructor(t){super(),ve(this,t,dt,at,we,{})}}new gt({target:document.body});
