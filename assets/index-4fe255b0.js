(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const f of r.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function G(){}function qe(e){return e()}function Se(){return Object.create(null)}function V(e){e.forEach(qe)}function Oe(e){return typeof e=="function"}function ye(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ue;function _e(e,t){return ue||(ue=document.createElement("a")),ue.href=t,e===ue.href}function Je(e){return Object.keys(e).length===0}function b(e,t){e.appendChild(t)}function H(e,t,n){e.insertBefore(t,n||null)}function W(e){e.parentNode&&e.parentNode.removeChild(e)}function Ke(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function C(e){return document.createElement(e)}function le(e){return document.createTextNode(e)}function R(){return le(" ")}function Ze(){return le("")}function D(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function p(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ge(e){return Array.from(e.childNodes)}function ve(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Le(e,t){e.value=t??""}function L(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function M(e,t,n){e.classList[n?"add":"remove"](t)}function Qe(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,i,t),o}let oe;function re(e){oe=e}function ke(){if(!oe)throw new Error("Function called outside component initialization");return oe}function Ve(e){ke().$$.on_mount.push(e)}function xe(e){ke().$$.on_destroy.push(e)}function $e(){const e=ke();return(t,n,{cancelable:i=!1}={})=>{const o=e.$$.callbacks[t];if(o){const r=Qe(t,n,{cancelable:i});return o.slice().forEach(f=>{f.call(e,r)}),!r.defaultPrevented}return!0}}const se=[],Y=[],ae=[],pe=[],et=Promise.resolve();let we=!1;function tt(){we||(we=!0,et.then(He))}function be(e){ae.push(e)}function ee(e){pe.push(e)}const ce=new Set;let ie=0;function He(){if(ie!==0)return;const e=oe;do{try{for(;ie<se.length;){const t=se[ie];ie++,re(t),nt(t.$$)}}catch(t){throw se.length=0,ie=0,t}for(re(null),se.length=0,ie=0;Y.length;)Y.pop()();for(let t=0;t<ae.length;t+=1){const n=ae[t];ce.has(n)||(ce.add(n),n())}ae.length=0}while(se.length);for(;pe.length;)pe.pop()();we=!1,ce.clear(),re(e)}function nt(e){if(e.fragment!==null){e.update(),V(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(be)}}const fe=new Set;let te;function de(){te={r:0,c:[],p:te}}function ge(){te.r||V(te.c),te=te.p}function O(e,t){e&&e.i&&(fe.delete(e),e.i(t))}function K(e,t,n,i){if(e&&e.o){if(fe.has(e))return;fe.add(e),te.c.push(()=>{fe.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const it=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Xe(e,t){e.d(1),t.delete(e.key)}function Ye(e,t,n,i,o,r,f,h,a,s,u,w){let d=e.length,k=r.length,y=d;const A={};for(;y--;)A[e[y].key]=y;const S=[],T=new Map,N=new Map;for(y=k;y--;){const I=w(o,r,y),g=n(I);let l=f.get(g);l?i&&l.p(I,t):(l=s(g,I),l.c()),T.set(g,S[y]=l),g in A&&N.set(g,Math.abs(y-A[g]))}const z=new Set,E=new Set;function v(I){O(I,1),I.m(h,u),f.set(I.key,I),u=I.first,k--}for(;d&&k;){const I=S[k-1],g=e[d-1],l=I.key,c=g.key;I===g?(u=I.first,d--,k--):T.has(c)?!f.has(l)||z.has(l)?v(I):E.has(c)?d--:N.get(l)>N.get(c)?(E.add(l),v(I)):(z.add(c),d--):(a(g,f),d--)}for(;d--;){const I=e[d];T.has(I.key)||a(I,f)}for(;k;)v(S[k-1]);return S}function ne(e,t,n){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function Ue(e){e&&e.c()}function ze(e,t,n,i){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),i||be(()=>{const f=e.$$.on_mount.map(qe).filter(Oe);e.$$.on_destroy?e.$$.on_destroy.push(...f):V(f),e.$$.on_mount=[]}),r.forEach(be)}function Ce(e,t){const n=e.$$;n.fragment!==null&&(V(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function st(e,t){e.$$.dirty[0]===-1&&(se.push(e),tt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ee(e,t,n,i,o,r,f,h=[-1]){const a=oe;re(e);const s=e.$$={fragment:null,ctx:[],props:r,update:G,not_equal:o,bound:Se(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:Se(),dirty:h,skip_bound:!1,root:t.target||a.$$.root};f&&f(s.root);let u=!1;if(s.ctx=n?n(e,t.props||{},(w,d,...k)=>{const y=k.length?k[0]:d;return s.ctx&&o(s.ctx[w],s.ctx[w]=y)&&(!s.skip_bound&&s.bound[w]&&s.bound[w](y),u&&st(e,w)),d}):[],s.update(),u=!0,V(s.before_update),s.fragment=i?i(s.ctx):!1,t.target){if(t.hydrate){const w=Ge(t.target);s.fragment&&s.fragment.l(w),w.forEach(W)}else s.fragment&&s.fragment.c();t.intro&&O(e.$$.fragment),ze(e,t.target,t.anchor,t.customElement),He()}re(a)}class Me{$destroy(){Ce(this,1),this.$destroy=G}$on(t,n){if(!Oe(n))return G;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(t){this.$$set&&!Je(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function lt(e){let t,n,i,o,r,f,h,a,s,u,w,d,k,y,A,S,T,N,z,E,v,I,g;return{c(){t=C("div"),n=C("div"),i=C("div"),o=R(),r=C("div"),f=R(),h=C("div"),a=R(),s=C("div"),u=C("div"),w=R(),d=C("div"),k=R(),y=C("div"),A=R(),S=C("div"),T=C("div"),N=R(),z=C("div"),E=R(),v=C("div"),p(i,"class","resizer h-[6px] w-[6px] rounded-sm border-2 svelte-19ac299"),M(i,"cursor-nw-resize",!e[4]),M(i,"dragging",e[4]&&e[5]===e[15]),p(r,"class","resizer h-[6px] border-b-2 border-dashed svelte-19ac299"),L(r,"width",e[2]+"px"),M(r,"cursor-n-resize",!e[4]),M(r,"dragging",e[4]&&e[5]===e[13]),p(h,"class","resizer h-[6px] w-[6px] rounded-sm border-2 svelte-19ac299"),M(h,"cursor-ne-resize",!e[4]),M(h,"dragging",e[4]&&e[5]===e[16]),p(n,"class","flex flex-row"),p(u,"class","resizer w-[6px] border-r-2 border-dashed svelte-19ac299"),L(u,"height",e[3]+"px"),M(u,"cursor-w-resize",!e[4]),M(u,"dragging",e[4]&&e[5]===e[12]),p(d,"class","cursor-move"),L(d,"width",e[2]+"px"),L(d,"height",e[3]+"px"),p(y,"class","resizer w-[6px] border-l-2 border-dashed svelte-19ac299"),L(y,"height",e[3]+"px"),M(y,"cursor-e-resize",!e[4]),M(y,"dragging",e[4]&&e[5]===e[10]),p(s,"class","flex flex-row"),p(T,"class","resizer h-[6px] w-[6px] rounded-sm border-2 svelte-19ac299"),M(T,"cursor-sw-resize",!e[4]),M(T,"dragging",e[4]&&e[5]===e[17]),p(z,"class","resizer h-[6px] border-t-2 border-dashed svelte-19ac299"),L(z,"width",e[2]+"px"),M(z,"cursor-s-resize",!e[4]),M(z,"dragging",e[4]&&e[5]===e[11]),p(v,"class","resizer h-[6px] w-[6px] rounded-sm border-2 svelte-19ac299"),M(v,"cursor-se-resize",!e[4]),M(v,"dragging",e[4]&&e[5]===e[14]),p(S,"class","flex flex-row"),p(t,"class","this svelte-19ac299"),L(t,"left",e[0]-6+"px"),L(t,"top",e[1]-6+"px"),L(t,"width",e[2]+12+"px"),L(t,"height",e[3]+12+"px"),M(t,"dragging",!!e[4])},m(l,c){H(l,t,c),b(t,n),b(n,i),b(n,o),b(n,r),b(n,f),b(n,h),b(t,a),b(t,s),b(s,u),b(s,w),b(s,d),b(s,k),b(s,y),b(t,A),b(t,S),b(S,T),b(S,N),b(S,z),b(S,E),b(S,v),I||(g=[D(window,"mouseup",e[19]),D(window,"mousemove",e[8]),D(i,"mousedown",e[20]),D(r,"mousedown",e[21]),D(h,"mousedown",e[22]),D(u,"mousedown",e[23]),D(d,"mousedown",e[24]),D(y,"mousedown",e[25]),D(T,"mousedown",e[26]),D(z,"mousedown",e[27]),D(v,"mousedown",e[28])],I=!0)},p(l,[c]){c&16&&M(i,"cursor-nw-resize",!l[4]),c&32816&&M(i,"dragging",l[4]&&l[5]===l[15]),c&4&&L(r,"width",l[2]+"px"),c&16&&M(r,"cursor-n-resize",!l[4]),c&8240&&M(r,"dragging",l[4]&&l[5]===l[13]),c&16&&M(h,"cursor-ne-resize",!l[4]),c&65584&&M(h,"dragging",l[4]&&l[5]===l[16]),c&8&&L(u,"height",l[3]+"px"),c&16&&M(u,"cursor-w-resize",!l[4]),c&4144&&M(u,"dragging",l[4]&&l[5]===l[12]),c&4&&L(d,"width",l[2]+"px"),c&8&&L(d,"height",l[3]+"px"),c&8&&L(y,"height",l[3]+"px"),c&16&&M(y,"cursor-e-resize",!l[4]),c&1072&&M(y,"dragging",l[4]&&l[5]===l[10]),c&16&&M(T,"cursor-sw-resize",!l[4]),c&131120&&M(T,"dragging",l[4]&&l[5]===l[17]),c&4&&L(z,"width",l[2]+"px"),c&16&&M(z,"cursor-s-resize",!l[4]),c&2096&&M(z,"dragging",l[4]&&l[5]===l[11]),c&16&&M(v,"cursor-se-resize",!l[4]),c&16432&&M(v,"dragging",l[4]&&l[5]===l[14]),c&1&&L(t,"left",l[0]-6+"px"),c&2&&L(t,"top",l[1]-6+"px"),c&4&&L(t,"width",l[2]+12+"px"),c&8&&L(t,"height",l[3]+12+"px"),c&16&&M(t,"dragging",!!l[4])},i:G,o:G,d(l){l&&W(t),I=!1,V(g)}}}function rt(e,t,n){let{x:i}=t,{y:o}=t,{width:r}=t,{height:f}=t,{ratio:h=r/f}=t,a,s=()=>{},u="",w=$e();function d(_,F,q){_.preventDefault(),n(4,a=_.target),n(5,s=F),n(6,u=q),document.body.classList.add(q)}function k(_){a&&(s({x:_.clientX,y:_.clientY}),w("update",{pos:{x:i,y:o},rect:{width:r,height:f}}))}function y(_){_.preventDefault(),n(4,a=_.target);let F=_.offsetX,q=_.offsetY;n(5,s=U=>{let J=a.getBoundingClientRect(),Z=U.x-(J.x+F),$=U.y-(J.y+q);n(0,i+=Z),n(1,o+=$)})}function A(_,F=!1){let q=a.getBoundingClientRect(),U=_.x-(q.x+1+q.width/2),J=Math.max(r+(F?-U:U),0),Z=Math.max(J/h,0),$=(Z-f)/2;n(2,r=J),n(3,f=Z),n(1,o-=$)}function S(_,F=!1){let q=a.getBoundingClientRect(),U=_.y-(q.y+q.height/2),J=Math.max(f+(F?-U:U),0),Z=Math.max(J*h,0),$=(Z-r)/2;n(2,r=Z),n(3,f=J),n(0,i-=$)}function T(_){let F=r;A(_,!0),n(0,i-=r-F)}function N(_){let F=f;S(_,!0),n(1,o-=f-F)}function z(_,F={}){let q=a.getBoundingClientRect(),U=(_.x-(q.x+q.width/2))*(F.x?-1:1),J=(_.y-(q.y+q.height/2))*(F.y?-1:1),Z=Math.abs(U)<Math.abs(J)?U:J,$=Math.min(Math.abs(U)/Math.max(r,1),Math.abs(J)/Math.max(f,1)),Ie=Math.max(r+Math.max(r,1)*$*(Z<0?-1:1),0);n(3,f=Math.max(Ie/h,0)),n(2,r=Ie)}function E(_){let F={width:r,height:f};z(_,{x:!0,y:!0}),n(0,i-=r-F.width),n(1,o-=f-F.height)}function v(_){let F=f;z(_,{y:!0}),n(1,o-=f-F)}function I(_){let F=r;z(_,{x:!0}),n(0,i-=r-F)}const g=()=>{n(4,a=void 0),u.length&&document.body.classList.remove(u)},l=_=>d(_,E,"cursor-nw-resize"),c=_=>d(_,N,"cursor-n-resize"),m=_=>d(_,v,"cursor-ne-resize"),X=_=>d(_,T,"cursor-w-resize"),B=_=>y(_),j=_=>d(_,A,"cursor-e-resize"),Q=_=>d(_,I,"cursor-sw-resize"),x=_=>d(_,S,"cursor-s-resize"),P=_=>d(_,z,"cursor-se-resize");return e.$$set=_=>{"x"in _&&n(0,i=_.x),"y"in _&&n(1,o=_.y),"width"in _&&n(2,r=_.width),"height"in _&&n(3,f=_.height),"ratio"in _&&n(18,h=_.ratio)},[i,o,r,f,a,s,u,d,k,y,A,S,T,N,z,E,v,I,h,g,l,c,m,X,B,j,Q,x,P]}class ot extends Me{constructor(t){super(),Ee(this,t,rt,lt,ye,{x:0,y:1,width:2,height:3,ratio:18})}}const ut="/assets/template-994b0501.png";function Te(e,t,n){const i=e.slice();return i[20]=t[n],i[22]=n,i}function at(e){let t,n=e[0].name+"",i,o,r,f,h;return{c(){t=C("div"),i=le(n),o=R(),r=C("input"),p(t,"class","py-2 pl-4"),p(r,"class","w-0 flex-grow bg-transparent py-2 pr-4 font-normal text-slate-200 underline-offset-4 placeholder:text-slate-400 placeholder:underline focus:outline-none"),p(r,"placeholder","(自行输入)　　　　　　　　　　　　　　　　　　　　")},m(a,s){H(a,t,s),b(t,i),H(a,o,s),H(a,r,s),Le(r,e[0].dynamic),f||(h=D(r,"input",e[10]),f=!0)},p(a,s){s&1&&n!==(n=a[0].name+"")&&ve(i,n),s&1&&r.value!==a[0].dynamic&&Le(r,a[0].dynamic)},d(a){a&&W(t),a&&W(o),a&&W(r),f=!1,h()}}}function ft(e){let t,n=e[0].name+"",i;return{c(){t=C("div"),i=le(n),p(t,"class","w-0 flex-grow px-4 py-2")},m(o,r){H(o,t,r),b(t,i)},p(o,r){r&1&&n!==(n=o[0].name+"")&&ve(i,n)},d(o){o&&W(t)}}}function Ae(e,t){let n,i,o,r,f,h,a,s=t[20].name+"",u,w,d,k,y;function A(...z){return t[14](t[22],...z)}function S(){return t[16](t[20],t[22])}function T(){return t[17](t[22])}function N(...z){return t[18](t[22],...z)}return{key:e,first:null,c(){n=C("div"),i=C("div"),o=C("img"),h=R(),a=C("div"),u=le(s),w=R(),d=C("button"),d.textContent="Ｘ",p(o,"draggable","false"),p(o,"alt",r=t[20].name),_e(o.src,f=t[20].image.src)||p(o,"src",f),p(o,"class","h-10 w-10 object-cover"),p(a,"class","w-0 flex-grow"),p(i,"class","flex w-0 flex-grow items-center gap-4 overflow-hidden"),p(i,"draggable","true"),p(d,"class","h-10 w-10 bg-slate-500 font-bold text-white"),p(n,"class","flex select-none flex-row items-center gap-4"),M(n,"bg-slate-300",t[1]===t[22]),this.first=n},m(z,E){H(z,n,E),b(n,i),b(i,o),b(i,h),b(i,a),b(a,u),b(n,w),b(n,d),k||(y=[D(i,"dragstart",A),D(i,"dragend",t[15]),D(d,"click",S),D(n,"mousedown",T),D(n,"dragover",N)],k=!0)},p(z,E){t=z,E&1&&r!==(r=t[20].name)&&p(o,"alt",r),E&1&&!_e(o.src,f=t[20].image.src)&&p(o,"src",f),E&1&&s!==(s=t[20].name+"")&&ve(u,s),E&3&&M(n,"bg-slate-300",t[1]===t[22])},d(z){z&&W(n),k=!1,V(y)}}}function dt(e){let t,n,i,o,r,f,h,a,s,u,w,d=[],k=new Map,y,A,S,T;function N(g,l){return g[0].dynamic===void 0?ft:at}let z=N(e),E=z(e),v=e[0].images;const I=g=>g[20].image;for(let g=0;g<v.length;g+=1){let l=Te(e,v,g),c=I(l);k.set(c,d[g]=Ae(c,l))}return{c(){t=C("div"),n=C("div"),i=C("button"),i.textContent="＜",o=R(),E.c(),r=R(),f=C("button"),f.textContent="＞",h=R(),a=C("div"),s=C("form"),u=C("input"),w=R();for(let g=0;g<d.length;g+=1)d[g].c();y=R(),A=C("button"),A.textContent="添加圖片",p(i,"class","p-2"),p(f,"class","p-2"),p(n,"class","flex flex-row items-center bg-slate-600 text-xl font-bold text-white"),p(u,"type","file"),p(u,"accept",".jpg,.jpeg,.png,.bmp"),p(s,"class","hidden"),p(A,"class","block p-0.5 hover:bg-gray-300 active:bg-gray-200"),p(a,"class","flex h-0 flex-grow flex-col gap-2 p-4"),p(t,"class","flex h-full w-full flex-col bg-gray-100")},m(g,l){H(g,t,l),b(t,n),b(n,i),b(n,o),E.m(n,null),b(n,r),b(n,f),b(t,h),b(t,a),b(a,s),b(s,u),e[12](u),e[13](s),b(a,w);for(let c=0;c<d.length;c+=1)d[c].m(a,null);b(a,y),b(a,A),S||(T=[D(i,"click",e[9]),D(f,"click",e[11]),D(u,"change",e[6]),D(A,"click",e[19])],S=!0)},p(g,[l]){z===(z=N(g))&&E?E.p(g,l):(E.d(1),E=z(g),E&&(E.c(),E.m(n,r))),l&419&&(v=g[0].images,d=Ye(d,l,I,1,g,v,k,a,Xe,Ae,y,Te))},i:G,o:G,d(g){g&&W(t),E.d(),e[12](null),e[13](null);for(let l=0;l<d.length;l+=1)d[l].d();S=!1,V(T)}}}function gt(e,t,n){let{slot:i}=t,{selectedImage:o}=t,{selectedSlot:r}=t,f,h;function a(){let g=f.files[0],l=new FileReader;l.onload=()=>{let c=new Image;c.onload=()=>{let m={width:c.width,height:c.height};if(c.width>c.height){if(c.width>512){let B=c.width/512;m.width/=B,m.height/=B}}else if(c.height>512){let B=c.height/512;m.width/=B,m.height/=B}let X={name:g.name,image:c,pos:{x:56-m.width/2,y:80-m.height/2},rect:m};n(1,o=0),n(0,i.images=[X,...i.images],i),n(0,i.dirty=!0,i)},c.src=l.result},l.readAsDataURL(g),h.reset()}let s=!1;function u(g,l){n(5,s=l);let c=g.target.parentElement;g.dataTransfer.dropEffect="move",g.dataTransfer.effectAllowed="move",g.dataTransfer.setData("text/plain",i.images[l].name),g.dataTransfer.setDragImage(c,c.clientWidth/2,c.clientHeight/2)}function w(g,l){if(s===!1)return;g.preventDefault();let c=i.images[s],m=i.images[l];n(0,i.images[l]=c,i),n(0,i.images[s]=m,i),n(5,s=l),g.dataTransfer.dropEffect="move",n(1,o=l)}const d=()=>{n(2,r=(15+r-1)%15),n(1,o=void 0)};function k(){i.dynamic=this.value,n(0,i)}const y=()=>{n(2,r=(r+1)%15),n(1,o=void 0)};function A(g){Y[g?"unshift":"push"](()=>{f=g,n(3,f)})}function S(g){Y[g?"unshift":"push"](()=>{h=g,n(4,h)})}const T=(g,l)=>u(l,g),N=()=>{n(5,s=!1),setTimeout(()=>n(0,i.dirty=!0,i))},z=(g,l)=>{n(0,i.images=i.images.filter(c=>c!==g),i),n(0,i.dirty=!0,i),n(1,o=o>l?o-1:o<l?o:void 0)},E=g=>n(1,o=g),v=(g,l)=>w(l,g),I=()=>f.click();return e.$$set=g=>{"slot"in g&&n(0,i=g.slot),"selectedImage"in g&&n(1,o=g.selectedImage),"selectedSlot"in g&&n(2,r=g.selectedSlot)},[i,o,r,f,h,s,a,u,w,d,k,y,A,S,T,N,z,E,v,I]}class ct extends Me{constructor(t){super(),Ee(this,t,gt,dt,ye,{slot:0,selectedImage:1,selectedSlot:2})}}const{Map:ht}=it;function Be(e,t,n){const i=e.slice();return i[23]=t[n],i[25]=n,i}function De(e,t,n){const i=e.slice();return i[26]=t[n],i[25]=n,i}function mt(e){let t=[],n=new ht,i,o,r,f=[...e[23].images].reverse();const h=s=>s[26].image;for(let s=0;s<f.length;s+=1){let u=De(e,f,s),w=h(u);n.set(w,t[s]=Fe(w,u))}let a=e[6]!==void 0&&Re(e);return{c(){for(let s=0;s<t.length;s+=1)t[s].c();i=R(),a&&a.c(),o=Ze()},m(s,u){for(let w=0;w<t.length;w+=1)t[w].m(s,u);H(s,i,u),a&&a.m(s,u),H(s,o,u),r=!0},p(s,u){u&65&&(f=[...s[23].images].reverse(),t=Ye(t,u,h,1,s,f,n,i.parentNode,Xe,Fe,i,De)),s[6]!==void 0?a?(a.p(s,u),u&64&&O(a,1)):(a=Re(s),a.c(),O(a,1),a.m(o.parentNode,o)):a&&(de(),K(a,1,1,()=>{a=null}),ge())},i(s){r||(O(a),r=!0)},o(s){K(a),r=!1},d(s){for(let u=0;u<t.length;u+=1)t[u].d(s);s&&W(i),a&&a.d(s),s&&W(o)}}}function _t(e){let t,n,i;function o(){return e[10](e[25])}return{c(){t=C("button"),p(t,"class","block h-full w-full")},m(r,f){H(r,t,f),n||(i=D(t,"click",o),n=!0)},p(r,f){e=r},i:G,o:G,d(r){r&&W(t),n=!1,i()}}}function Fe(e,t){let n,i,o;function r(){return t[11](t[23],t[25])}return{key:e,first:null,c(){n=C("div"),p(n,"class","absolute z-10"),L(n,"top",t[26].pos.y+"px"),L(n,"left",t[26].pos.x+"px"),L(n,"width",t[26].rect.width+"px"),L(n,"height",t[26].rect.height+"px"),this.first=n},m(f,h){H(f,n,h),i||(o=D(n,"mousedown",r),i=!0)},p(f,h){t=f,h&1&&L(n,"top",t[26].pos.y+"px"),h&1&&L(n,"left",t[26].pos.x+"px"),h&1&&L(n,"width",t[26].rect.width+"px"),h&1&&L(n,"height",t[26].rect.height+"px")},d(f){f&&W(n),i=!1,o()}}}function Re(e){let t,n,i,o,r,f;function h(d){e[12](d)}function a(d){e[13](d)}function s(d){e[14](d)}function u(d){e[15](d)}let w={ratio:e[0][e[5]].images[e[6]].image.width/e[0][e[5]].images[e[6]].image.height};return e[0][e[5]].images[e[6]].pos.x!==void 0&&(w.x=e[0][e[5]].images[e[6]].pos.x),e[0][e[5]].images[e[6]].pos.y!==void 0&&(w.y=e[0][e[5]].images[e[6]].pos.y),e[0][e[5]].images[e[6]].rect.width!==void 0&&(w.width=e[0][e[5]].images[e[6]].rect.width),e[0][e[5]].images[e[6]].rect.height!==void 0&&(w.height=e[0][e[5]].images[e[6]].rect.height),t=new ot({props:w}),Y.push(()=>ne(t,"x",h)),Y.push(()=>ne(t,"y",a)),Y.push(()=>ne(t,"width",s)),Y.push(()=>ne(t,"height",u)),t.$on("update",e[16]),{c(){Ue(t.$$.fragment)},m(d,k){ze(t,d,k),f=!0},p(d,k){const y={};k&97&&(y.ratio=d[0][d[5]].images[d[6]].image.width/d[0][d[5]].images[d[6]].image.height),!n&&k&97&&(n=!0,y.x=d[0][d[5]].images[d[6]].pos.x,ee(()=>n=!1)),!i&&k&97&&(i=!0,y.y=d[0][d[5]].images[d[6]].pos.y,ee(()=>i=!1)),!o&&k&97&&(o=!0,y.width=d[0][d[5]].images[d[6]].rect.width,ee(()=>o=!1)),!r&&k&97&&(r=!0,y.height=d[0][d[5]].images[d[6]].rect.height,ee(()=>r=!1)),t.$set(y)},i(d){f||(O(t.$$.fragment,d),f=!0)},o(d){K(t.$$.fragment,d),f=!1},d(d){Ce(t,d)}}}function Ne(e){let t,n,i,o,r;const f=[_t,mt],h=[];function a(s,u){return s[5]!==s[25]?0:1}return n=a(e),i=h[n]=f[n](e),{c(){t=C("div"),i.c(),o=R(),p(t,"class","slot svelte-1m3oa9i"),L(t,"left",e[23].pos.x+"px"),L(t,"top",e[23].pos.y+"px"),M(t,"outline",e[5]===e[25])},m(s,u){H(s,t,u),h[n].m(t,null),b(t,o),r=!0},p(s,u){let w=n;n=a(s),n===w?h[n].p(s,u):(de(),K(h[w],1,1,()=>{h[w]=null}),ge(),i=h[n],i?i.p(s,u):(i=h[n]=f[n](s),i.c()),O(i,1),i.m(t,o)),(!r||u&1)&&L(t,"left",s[23].pos.x+"px"),(!r||u&1)&&L(t,"top",s[23].pos.y+"px"),(!r||u&32)&&M(t,"outline",s[5]===s[25])},i(s){r||(O(i),r=!0)},o(s){K(i),r=!1},d(s){s&&W(t),h[n].d()}}}function je(e){let t,n,i,o,r;function f(u){e[17](u)}function h(u){e[18](u)}function a(u){e[19](u)}let s={};return e[0][e[5]]!==void 0&&(s.slot=e[0][e[5]]),e[6]!==void 0&&(s.selectedImage=e[6]),e[5]!==void 0&&(s.selectedSlot=e[5]),t=new ct({props:s}),Y.push(()=>ne(t,"slot",f)),Y.push(()=>ne(t,"selectedImage",h)),Y.push(()=>ne(t,"selectedSlot",a)),{c(){Ue(t.$$.fragment)},m(u,w){ze(t,u,w),r=!0},p(u,w){const d={};!n&&w&33&&(n=!0,d.slot=u[0][u[5]],ee(()=>n=!1)),!i&&w&64&&(i=!0,d.selectedImage=u[6],ee(()=>i=!1)),!o&&w&32&&(o=!0,d.selectedSlot=u[5],ee(()=>o=!1)),t.$set(d)},i(u){r||(O(t.$$.fragment,u),r=!0)},o(u){K(t.$$.fragment,u),r=!1},d(u){Ce(t,u)}}}function pt(e){let t,n,i,o,r,f,h,a,s,u,w,d,k,y,A,S,T,N,z,E=e[0],v=[];for(let l=0;l<E.length;l+=1)v[l]=Ne(Be(e,E,l));const I=l=>K(v[l],1,1,()=>{v[l]=null});let g=e[5]!==void 0&&je(e);return{c(){t=C("img"),i=R(),o=C("div"),r=C("div"),f=C("div"),h=C("canvas"),a=R();for(let l=0;l<v.length;l+=1)v[l].c();s=R(),u=C("div"),w=C("div"),g&&g.c(),d=R(),k=C("a"),y=le("保存"),A=R(),S=C("div"),S.innerHTML=`<p>Credit: <a class="text-blue-700" target="_blank" rel="noreferrer" href="https://twitter.com/EastAiruier/status/1624174786359496704">@EastAiruier</a></p> 
        <p class="mt-2">代碼: <a href="https://github.com/eslym/vtuber-preference" class="text-blue-700" target="_blank" rel="noreferrer">eslym/vtuber-preference</a></p>`,p(t,"class","hidden"),_e(t.src,n=ut)||p(t,"src",n),p(t,"alt",""),p(h,"class","absolute"),p(h,"width","680"),p(h,"height","680"),p(f,"class","template select-none svelte-1m3oa9i"),p(w,"class","h-0 flex-grow"),p(k,"href",e[3]),p(k,"download","output.jpg"),p(k,"target","_blank"),p(k,"rel","noreferrer"),p(k,"class","bg-slate-400 p-2 text-center text-lg font-bold text-white"),p(u,"class","flex w-80 flex-col overflow-auto bg-white"),p(r,"class","flex flex-row shadow-lg"),p(S,"class","text-center text-sm italic"),p(o,"class","flex h-screen w-screen flex-col items-center justify-center gap-4")},m(l,c){H(l,t,c),e[8](t),H(l,i,c),H(l,o,c),b(o,r),b(r,f),b(f,h),e[9](h),b(f,a);for(let m=0;m<v.length;m+=1)v[m].m(f,null);b(r,s),b(r,u),b(u,w),g&&g.m(w,null),b(u,d),b(u,k),b(k,y),b(o,A),b(o,S),T=!0,N||(z=D(t,"load",e[7]),N=!0)},p(l,[c]){if(c&97){E=l[0];let m;for(m=0;m<E.length;m+=1){const X=Be(l,E,m);v[m]?(v[m].p(X,c),O(v[m],1)):(v[m]=Ne(X),v[m].c(),O(v[m],1),v[m].m(f,null))}for(de(),m=E.length;m<v.length;m+=1)I(m);ge()}l[5]!==void 0?g?(g.p(l,c),c&32&&O(g,1)):(g=je(l),g.c(),O(g,1),g.m(w,null)):g&&(de(),K(g,1,1,()=>{g=null}),ge()),(!T||c&8)&&p(k,"href",l[3])},i(l){if(!T){for(let c=0;c<E.length;c+=1)O(v[c]);O(g),T=!0}},o(l){v=v.filter(Boolean);for(let c=0;c<v.length;c+=1)K(v[c]);K(g),T=!1},d(l){l&&W(t),e[8](null),l&&W(i),l&&W(o),e[9](null),Ke(v,l),g&&g.d(),N=!1,z()}}}function Pe(e,t,n){let i=document.createElement("canvas");return i.width=t,i.height=n,i.getContext("2d").drawImage(e,0,0,t,n),i}const wt=new Path2D("M18 9.55385e-06C6 -0.00873929 0 5.99126 0 18C0 30.0088 0 63.0088 0 117L78 162L114 162L114 18C114 6.00001 108 9.55385e-06 96 9.55385e-06C78 9.55385e-06 77.7324 0.348435 18 9.55385e-06Z"),We=new WeakMap,he=new Map;function me(){return new Promise(e=>setTimeout(e))}function bt(e,t,n){let i,o,r,f=!0,h=!1,a=[{name:"第一個看的",pos:{x:48,y:48},images:[]},{name:"最常看的",pos:{x:166,y:48},images:[]},{name:"最佳節目",pos:{x:283,y:48},images:[]},{name:"最瘋狂的",pos:{x:401,y:48},images:[]},{name:"最療愈的",pos:{x:519,y:48},images:[]},{name:"聲音最好聽的",pos:{x:48,y:248},images:[]},{name:"唱歌最好聽的",pos:{x:166,y:248},images:[]},{name:"最喜歡的",pos:{x:283,y:248},images:[]},{name:"影響最深遠的",pos:{x:401,y:248},images:[]},{name:"最漂亮的",pos:{x:519,y:248},images:[]},{name:"最想犯罪的",pos:{x:48,y:448},images:[]},{name:"最帥的",pos:{x:166,y:448},images:[]},{name:"最想推廣的",pos:{x:283,y:448},images:[]},{name:"最婆的",pos:{x:401,y:448},images:[]},{name:"最",pos:{x:519,y:448},dynamic:"",images:[]}],s,u;async function w(m){if(h)return;n(4,f=!1),h=!0;let X=document.createElement("canvas");X.width=o.width,X.height=o.height;let B=X.getContext("2d");B.fillStyle="white",B.fillRect(0,0,680,680);for(let j of m)if(j.images.length){if(B.resetTransform(),B.translate(j.pos.x,j.pos.y),j.dirty||!he.has(j.name)){let Q=document.createElement("canvas");Q.width=114,Q.height=162;let x=Q.getContext("2d");x.clip(wt);for(let P of[...j.images].reverse()){let _=We.get(P.image);if(!_||_.rect.width!==P.rect.width||_.rect.height!==P.rect.height){let F=Pe(P.image,(P.image.width+P.rect.width)/2,(P.image.height+P.rect.height)/2);await me(),We.set(P.image,_={image:Pe(F,P.rect.width,P.rect.height),rect:{...P.rect}})}x.drawImage(_.image,P.pos.x,P.pos.y),await me()}he.set(j.name,Q),j.dirty=!1}B.drawImage(he.get(j.name),0,0),await me()}B.resetTransform(),B.drawImage(i,0,0);for(let j of m){if(!j.dynamic)continue;B.resetTransform(),B.translate(j.pos.x,j.pos.y),B.textAlign="center",B.textBaseline="alphabetic",B.fillStyle="black",B.font='14px "Noto Sans TC", "Noto Sans SC", "Noto Sans JP", sans-serif';let Q=B.measureText(j.dynamic).width,x=66;Q>64&&(B.textAlign="left",x=34),B.fillText(j.dynamic,x,184)}o.getContext("2d").drawImage(X,0,0),n(3,r=o.toDataURL("image/jpeg")),h=!1}let d;Ve(()=>{d=setInterval(()=>{f&&w(a)},10)}),xe(()=>{clearInterval(d)});const k=()=>n(4,f=!0);function y(m){Y[m?"unshift":"push"](()=>{i=m,n(1,i)})}function A(m){Y[m?"unshift":"push"](()=>{o=m,n(2,o)})}const S=m=>{n(5,s=m),n(6,u=void 0)},T=(m,X)=>n(6,u=m.images.length-X-1);function N(m){e.$$.not_equal(a[s].images[u].pos.x,m)&&(a[s].images[u].pos.x=m,n(0,a))}function z(m){e.$$.not_equal(a[s].images[u].pos.y,m)&&(a[s].images[u].pos.y=m,n(0,a))}function E(m){e.$$.not_equal(a[s].images[u].rect.width,m)&&(a[s].images[u].rect.width=m,n(0,a))}function v(m){e.$$.not_equal(a[s].images[u].rect.height,m)&&(a[s].images[u].rect.height=m,n(0,a))}const I=()=>{n(0,a[s].dirty=!0,a)};function g(m){e.$$.not_equal(a[s],m)&&(a[s]=m,n(0,a))}function l(m){u=m,n(6,u)}function c(m){s=m,n(5,s)}return e.$$.update=()=>{e.$$.dirty&1&&a&&n(4,f=!0)},[a,i,o,r,f,s,u,k,y,A,S,T,N,z,E,v,I,g,l,c]}class yt extends Me{constructor(t){super(),Ee(this,t,bt,pt,ye,{})}}new yt({target:document.body});
